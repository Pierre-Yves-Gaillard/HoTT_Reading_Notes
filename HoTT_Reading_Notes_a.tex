% HoTT Reading Notes a
% http://goo.gl/Dz6r8g
% https://docs.google.com/document/d/15-yaLYocktW8PtUeiKjTupslbpdnDs0HH5GIZA20Sxc/edit
% https://github.com/Pierre-Yves-Gaillard/HoTT_Reading_Notes/edit/master/HoTT_Reading_Notes_a.tex
% https://github.com/Pierre-Yves-Gaillard/HoTT_Reading_Notes/blob/master/HoTT_Reading_Notes_a.tex 
% http://iecl.univ-lorraine.fr/~Pierre-Yves.Gaillard/HoTT/ReadingNotes
% https://docs.google.com/document/d/15-yaLYocktW8PtUeiKjTupslbpdnDs0HH5GIZA20Sxc/edit?usp=sharing
% !TEX encoding = UTF-8 Unicode
\documentclass[12pt]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{amssymb,amsmath}
%\usepackage[a4paper]{geometry}
\usepackage[a4paper,hmargin=88pt,vmargin=88pt]{geometry}
\usepackage{comment}
\usepackage{datetime}
\usepackage[pdfusetitle]{hyperref}%colorlinks, urlbordercolor={0 1 1}?
\usepackage[all]{xy}
\addtolength{\parskip}{.5\baselineskip}
%\renewcommand{\baselinestretch}{1.1}
%\pagestyle{empty}
\newcommand{\nc}{\newcommand}
\nc{\mbb}{\mathbb}\nc{\bb}{\mathbb}
\nc{\mbf}{\mathbf}\nc{\mb}{\mathbf}
\nc{\mc}{\mathcal}
\nc{\msf}{\mathsf}\nc{\ms}{\mathsf}
\nc{\acc}{\ms{acc}}
\nc{\ack}{\ms{ack}}
\nc{\ap}{\ms{ap}}
\nc{\apd}{\ms{apd}}
\nc{\base}{\ms{base}}\nc{\ba}{\ms{base}}
\nc{\boucle}{\ms{loop}}\nc{\Loop}{\ms{loop}}\nc{\lo}{\ms{loop}}
\nc{\bu}{\bullet}
\nc{\cd}{\cdot}
\nc{\centre}{\ms{center}}\nc{\Center}{\ms{center}}\nc{\cen}{\ms{center}}\nc{\ce}{\ms{center}}
\nc{\ci}{\circ}
\nc{\code}{\ms{code}}\nc{\decode}{\ms{decode}}\nc{\encode}{\ms{encode}}
\nc{\de}{:\equiv}
\nc{\dr}{\right}\nc{\ga}{\left}
\nc{\ds}{\displaystyle}
\nc{\ep}{\varepsilon}
\nc{\eq}{\equiv}
\nc{\fib}{\ms{fib}}
\nc{\funext}{\ms{funext}}\nc{\fu}{\ms{funext}}
\nc{\glue}{\ms{glue}}\nc{\gl}{\ms{glue}}
\nc{\happly}{\ms{happly}}\nc{\ha}{\ms{happly}}
\nc{\id}{\ms{id}}
\nc{\im}{\ms{im}}
\nc{\inc}{\subseteq}
\nc{\ind}{\ms{ind}}
\nc{\inl}{\ms{inl}}
\nc{\inr}{\ms{inr}}
\nc{\isContr}{\ms{isContr}}\nc{\co}{\ms{isContr}}\nc{\iC}{\ms{isContr}}\nc{\ic}{\ms{isContr}}
\nc{\isequiv}{\ms{isequiv}}\nc{\iseq}{\ms{isequiv}}\nc{\ieq}{\ms{isequiv}}
\nc{\ishae}{\ms{ishae}}\nc{\ish}{\ms{ishae}}\nc{\ih}{\ms{ishae}}
\nc{\isProp}{\ms{isProp}}\nc{\prop}{\ms{isProp}}\nc{\iP}{\ms{isProp}}\nc{\ip}{\ms{isProp}}
\nc{\isSet}{\ms{isSet}}\nc{\isS}{\ms{isSet}}\nc{\iss}{\ms{isSet}}\nc{\iS}{\ms{isSet}}\nc{\is}{\ms{isSet}}
\nc{\la}{\lambda}
\nc{\LEM}{\ms{LEM}}\nc{\lem}{\ms{LEM}}\nc{\LE}{\ms{LEM}}
\nc{\lv}{\lvert}\nc{\rv}{\rvert}\nc{\lV}{\lVert}\nc{\rV}{\rVert}
\nc{\Map}{\ms{Map}}
\nc{\N}{\bb N}
\nc{\na}{\ms{nat}}
\nc{\nn}{\noindent}
\nc{\one}{\mb1}
\nc{\oo}{\operatorname}
\nc{\ps}{\mc P}
\nc{\pa}{\ms{pair}^=}
\nc{\ph}{\varphi}
\nc{\ppmap}{\ms{ppmap}}
\nc{\pr}{\ms{pr}}
\nc{\Prop}{\ms{Prop}}
\nc{\rec}{\ms{rec}}
\nc{\refl}{\ms{refl}}\nc{\re}{\ms{refl}}
\nc{\Set}{\ms{Set}}
\nc{\sm}{\scriptstyle}
\nc{\suc}{\ms{succ}}\nc{\su}{\ms{succ}}
\nc{\transport}{\ms{transport}}\nc{\tr}{\ms{transport}}
\nc{\two}{\mb2}
\nc{\Type}{\ms{-Type}}\nc{\type}{\ms{-Type}}\nc{\ty}{\ms{-Type}}
\nc{\U}{\mc U}\nc{\V}{\mc V}
\nc{\ua}{\ms{ua}}
\nc{\uniq}{\ms{uniq}}
\nc{\vide}{\varnothing}
\nc{\zero}{\mb0}
\title{HoTT Reading Notes}
\author{Pierre-Yves Gaillard}
\date{\today, \currenttime}
\begin{document}
% $$\text{mathbf }\mb1,\text{ pmb }\pmb1,\text{ boldsymbol }\boldsymbol1$$ \tiny, \scriptsize, \footnotesize, \small, \normalsize, \large, \Large, \LARGE, \huge, \Huge

\maketitle%\nn\today, \currenttime

\nn This text is available at 

\nn\href{http://iecl.univ-lorraine.fr/~Pierre-Yves.Gaillard/HoTT/ReadingNotes}{http://iecl.univ-lorraine.fr/$\sim$Pierre-Yves.Gaillard/HoTT/ReadingNotes}

%\nn\href{http://iecl.univ-lorraine.fr/~Pierre-Yves.Gaillard/HoTT/ReadingNotes}{http://iecl.univ-lorraine.fr/\textasciitilde Pierre-Yves.Gaillard/HoTT/ReadingNotes}

\nn\href{https://github.com/Pierre-Yves-Gaillard/HoTT_Reading_Notes}{https://github.com/Pierre-Yves-Gaillard/HoTT\_Reading\_Notes}

\nn\href{http://goo.gl/Dz6r8g}{http://goo.gl/Dz6r8g}

This is an informal set of comments on the HoTT Book:

\nn\href{http://homotopytypetheory.org/book}{http://homotopytypetheory.org/book}

This is a work in progress. John Dougherty's text 

\nn\href{https://github.com/jdoughertyii/hott-exercises}{https://github.com/jdoughertyii/hott-exercises}

\nn has been most helpful.

\tableofcontents%\newpage

%%

\section{Chapter 1}

\subsection{Exercise 1.3} 

\emph{Statement.} Derive the induction principle for products $\ind_{A\times B}$, using only the projections and the propositional uniqueness principle $\uniq_{A\times B}$. Verify that the definitional equalities are valid. Generalize $\uniq_{A\times B}$ to $\Sigma$-types, and do the same for $\Sigma$-types. \emph{(This requires concepts from Chapter~2.)}

\nn\emph{Solution.} It suffices to handle $\Sigma$-types. 

\nn(a) We assume that, for all type family $B:A\to\U$ we have a map 
$$
\pr_1:\left(\sum_{a:A}B(a)\right)\to A,
$$ 
a dependent function 
$$
\pr_2:\prod_{x:\sum_{a:A}B(a)}B(\pr_1(x))
$$
satisfying
\begin{equation}\label{131}
\pr_1(a,b)\equiv a,\quad\pr_2(a,b)\equiv b
\end{equation}
for all $a:A$ and all $b:B(a)$.

\nn(b) We also assume that, for all type family $B:A\to\U$ we have a dependent function 
$$
\uniq_{\sum_{a:A}B(a)}:\prod_{x:\sum_{a:A}B(a)}(\pr_1(x),\pr_2(x))=x
$$ 
such that 
\begin{equation}\label{132}
\uniq_{\sum_{a:A}B(a)}(a,b)\equiv\refl_{(a,b)}
\end{equation}
for all $a:A$ and all $b:B(a)$. 

\nn(c) We define
$$
\ind_{\sum_{a:A}B(a)}:\prod_{C:\left(\sum_{a:A}B(a)\right)\to\U} 
\left(\prod_{a:A}\ \prod_{b:B(a)}C((a,b))\right) 
\to\prod_{x:\sum_{a:A}B(a)}C(x)
$$
thanks to the transport principle, which is indeed a concept from Chapter~2, by
\begin{equation}\label{133}
\ind_{\sum_{a:A}B(a)}(C,g,x):\equiv\left(\uniq_{\sum_{a:A}B(a)}(x)\right)_\star\Big(g\big(\pr_1(x)\big)\big(\pr_2(x)\big)\Big).
\end{equation}
(d) We must prove 
$$
\ind_{\sum_{a:A}B(a)}(C,g,(a,b))\equiv g(a)(b)
$$
for all $a:A$ and all $b:B(a)$. But this follows from \eqref{131}, \eqref{132} and \eqref{133}.

%%

\subsection{Exercise 1.5}

\emph{Statement.} Show that if we define $A+B:\equiv\sum_{x:\mb2}\rec_\mb2(\U,A,B,x)$, then we can give a definition of $\ind_{A+B}$ for which the definitional equalities stated in \S1.7 hold.

\nn\emph{Solution.} Recall that we have 
$$
\rec_\mb2:\prod_{C:\U}C\to C\to\mb2\to C,\quad\rec_\mb2(C,c_0,c_1,0_\mb2):\eq c_0,\quad\rec_\mb2(C,c_0,c_1,1_\mb2):\eq c_1.
$$
We define $\inl:A\to A+B$ by $\inl(a):\equiv(0_\mb2,a)$, and we define $\inr$ similarly. Let $C:A+B\to\U$ be given, and put 
$$
A':\equiv\prod_{a:A}C(\inl(a)),\quad B':\equiv\prod_{b:B}C(\inr(b)).
$$
We must define 
$$
\ind_{A+B}(C):A'\to B'\to\prod_{x:A+B}C(x).
$$ 
Let $g_0:A',g_1:B'$ be given. We must define 
$$
\ind_{A+B}(C,g_0,g_1):\prod_{x:A+B}C(x).
$$ 
Set $T:\equiv\rec_\mb2(\U,A,B):\mb2\to\U$. We define $D:\mb2\to\U$ by 
$$
D(n):\equiv\prod_{u:T(n)}C((n,u)).
$$ 
Note that $D(0_\mb2)\equiv A'$ and $D(1_\mb2)\equiv B'$. Recall that 
$$
\ind_\mb2(D):D(0_\mb2)\to D(1_\mb2)\to\prod_{n:\mb2}D(n).
$$ 
In particular we have 
$$
\ind_\mb2(D,g_0,g_1):\prod_{n:\mb2}\ \prod_{u:T(n)}C((n,u)).
$$ 
Since 
$$
\ind_{\sum_{n:\mb2}T(n)}(C):\left(\prod_{n:\mb2}\ \prod_{u:T(n)}C((n,u))\right)\to\prod_{x:A+B}C(x),
$$ 
we can put 
$$
\ind_{A+B}(C,g_0,g_1):\equiv\ind_{\sum_{n:\mb2}T(n)}(C,\ind_\mb2(D,g_0,g_1)).
$$ 
We must check 
\begin{equation}\label{15a}
\ind_{A+B}(C,g_0,g_1,(0_\mb2,a))\equiv g_0(a),
\end{equation}
\begin{equation}\label{15b}
\ind_{A+B}(C,g_0,g_1,(1_\mb2,b))\equiv g_1(b).
\end{equation} 
We have 
\begin{align*}
\ind_{A+B}(C,g_0,g_1,(0_\mb2,a))&\equiv\ind_{\sum_{n:\mb2}T(n)}\big(C,\ind_\mb2(D,g_0,g_1),(0_\mb2,a)\big)\\ 
&\equiv\ind_\mb2(D,g_0,g_1)(0_\mb2)(a)\\ 
&\equiv g_0(a),
\end{align*}
the three definitional equalities following respectively from the definitions of the dependent functions
$$
\ind_{A+B},\quad\ind_{\sum_{n:\mb2}T(n)},\quad\ind_\mb2.
$$ 
This proves \eqref{15a}. The proof of \eqref{15b} is similar.

%%

\subsection{Exercise 1.6}

\emph{Statement.} Show that if we define $A\times B:\equiv\prod_{x:\mb2}\rec_\mb2(\U,A,B,x)$, then we can give a definition of  $\ind_{A\times B}$ for which the definitional equalities stated in \S1.5 hold propositionally (i.e. using equality types). \emph{(This requires the function extensionality axiom, which is introduced in \S2.9.)}

\nn\emph{Solution.} As above put $T:\equiv\rec_\mb2(\U,A,B):\mb2\to\U$, so that $A\times B:\equiv\prod_{n:\mb2}T(n)$, and 
$$
\ind_\mb2(T):A\to B\to A\times B.
$$ 
For $a:A,b:B$ we abbreviate $\ind_\mb2(T,a,b)$ by $(a,b)$; in particular we have 
$$
(a,b):A\times B,\quad(a,b)(0_\mb2)\equiv a,\quad(a,b)(1_\mb2)\equiv b.
$$ 
Let $C:A\times B\to\U$. We must define 
$$
\ind_{A\times B}(C):\left(\prod_{a:A}\prod_{b:B}C((a,b))\right)\to\prod_{u:A\times B}C(u).
$$ 
Let $u:A\times B$ and define $D:\mb2\to\U$ by 
$$
D(n):\equiv\Big(\big(u(0_\mb2),u(1_\mb2)\big)(n)=u(n)\Big)
$$ 
and recall that 
$$
\ind_\mb2(D):D(0_\mb2)\to D(1_\mb2)\to\prod_{n\in\mb2}D(n)
$$ 
and that 
$$
\funext:\left(\prod_{n\in\mb2}D(n)\right)\to\Big(\big(u(0_\mb2),u(1_\mb2)\big)=u\Big).
$$
We get 
$$
\alpha:\equiv\ind_\mb2(D,\refl_{u(0_\mb2)},\refl_{u(1_\mb2)}):\prod_{n\in\mb2}D(n),\quad\funext(\alpha):\big(u(0_\mb2),u(1_\mb2)\big)=u,
$$
$$
\funext(\alpha)_\star:C\Big(\big(u(0_\mb2),u(1_\mb2)\big)\Big)\to C(u).
$$
In particular we can set
$$
\ind_{A\times B}(C,g,u):\equiv\funext(\alpha)_\star\Big(g\big(u(0_\mb2)\big)\big(u(1_\mb2)\big)\Big).
$$

To show that the definitional equalities stated in \S1.5 hold propositionally, we assume $u\equiv(a,b)$. In particular we have 
$$
\alpha:\prod_{n\in\mb2}\Big((a,b)(n)=(a,b)(n)\Big).
$$ 
It is easy to prove $\alpha(n)=\refl_{(a,b)(n)}$ by induction. This gives 
$$
\ind_{A\times B}(C,g,(a,b))=g(a)(b),
$$ 
as required.

%%

\subsection{Exercise 1.8}

\emph{Statement.} Define multiplication and exponentiation using $\rec_\N$. Verify that $$(\N,+,0,\times,1)$$ is a semiring using only $\ind_\N$. You will probably also need to use symmetry and transitivity of equality, Lemmas 2.1.1 and 2.1.2.

\nn\emph{Solution.} We put 
$$
mn:\equiv\rec_\N(\ \N\to\N\ ,\ \la n.0\ ,\ \la m.\la g.\la n.n+g(n)\ ,\ m\ ,\ n\ ),
$$
$$
n^m:\equiv\rec_\N(\ \N\to\N\ ,\ \la n.1\ ,\ \la m.\la g.\la n.ng(n)\ ,\ m\ ,\ n\ ).
$$ 
%$$\ms{mult}:\equiv\rec_\N(\N\to\N,\la m.0,\la m.\la g.\la n.m+g(m)),$$ $$\ms{exp}:\equiv\rec_\N(\N\to\N,\la m.1,\la m.\la g.\la n.mg(m)).$$ 
We omit the verification of the fact that $(\N,+,0,\times,1)$ is a semiring.

For the reader's convenience we briefly recall the definition of the recursor for $\N$:
$$\rec_\N:\prod_{C:\U}C\to(\N\to C\to C)\to\N\to C$$

$$\rec_\N(C,c_0,c_s,0):\eq c_0,$$

$$\rec_\N(C,c_0,c_s,\su(n)):\eq c_s(n,\rec_\N(C,c_0,c_s,n)).$$

%%

\subsection{Exercise 1.10}

\emph{Statement.} Show that the Ackermann function $\ack :\N\to\N\to\N$ is definable using only $\rec_\N$ satisfying the following equations:
\begin{align*}
\ack(0,n)&\equiv\su(n),\\
\ack(\su(m),0)&\equiv\ack(m,1),\\
\ack(\su(m),\su(n))&\equiv\ack(m,\ack(\su(m),n)).
\end{align*}

\nn\emph{Solution.} I have used John Dougherty's text 

\nn\href{https://github.com/jdoughertyii/hott-exercises}{https://github.com/jdoughertyii/hott-exercises}

We try to solve Equation 
\begin{equation}\label{ack1}
\ack:\equiv\rec_\N(C,c_0,c_s)
\end{equation}
for $C:\U,c_0:C,c_s:\N\to C\to C$. We get $C:\equiv(\N\to\N)$, and evaluation at 0 gives $c_0\equiv\su$. Let $i:\N,f:\N\to\N$. It suffices to solve Equation 
\begin{equation}\label{ack2}
c_s(i,f):\equiv\rec_\N(D,d_0(i,f),d_s(i,f))
\end{equation}
for $D:\U,d_0(i,f):D,d_s(i,f):\N\to D\to D$. We get $D:\equiv\N$. We have
\begin{align*}
\ack(\su(m))&\equiv\rec_\N(C,\su,c_s,\su(m))\\
&\equiv c_s(m,\rec_\N(C,\su,c_s,m))\\
&\equiv c_s(m,\ack(m))\\
&\equiv\rec_\N(\N,d_0(m,\ack(m)),d_s(m,\ack(m))),
\end{align*}
and evaluation at 0 yields $d_0(m,\ack(m))\equiv\ack(m)(1)$, prompting us to set 
$$
d_0(i,f):\equiv f(1),
$$ 
yielding 
$$
\ack(\su(m))\equiv\rec_\N\Big(\N,\ack(m,1),d_s\big(m,\ack(m)\big)\Big).
$$
We have 
\begin{align*}
\ack(m)\big(\ack(\su(m),n)\big)&\equiv\ack\big(m,\ack(\su(m),n)\big)\\ 
&\equiv\ack(\su(m),\su(n))\\ 
&\equiv\rec_\N\big(\N,\ack(m,1),d_s(m,\ack(m)),\su(n)\big)\\
&\equiv d_s\big(m,\ack(m)\big)\bigg(n,\rec_N\Big(\N,\ack(m,1),d_s\big(m,\ack(m)\big)\Big)\bigg)\\
&\equiv d_s\big(m,\ack(m)\big)\Big(n,\ack\big(\su(m),n\big)\Big),
\end{align*}
prompting us to set $d_s(i,f)(x,y):\equiv f(y)$. 

Abbreviating $d_s(i,f)$ by $f'$, we get 
$$
\ack:\equiv\rec_\N(\N\to\N,\su,c_s)
$$ 
with 
$$ 
c_s(i,f)\equiv\rec_\N(\N,f(1),f')
$$ 
for 
$$ 
i:\N,\quad f:\N\to\N,\quad f':\N\to\N\to\N,\quad f'(x,y):\equiv f(y).
$$ 
In other words, we get 
$$
\ack:\eq\rec_\N\Big(\N\to\N,\su,\la i.\la f.\rec_\N\big(\N,f(1),\la x.\la y.f(y)\big)\Big).
$$

%%

\subsection{Exercise 1.13}

\emph{Statement.} Using propositions-as-types, derive the double negation of the principle of excluded middle, i.e. prove \emph{not (not ($P$ or not $P$))}.

\nn\emph{Solution.} For any types $A,B$ we define $f:\Big(\big(A+(A\to B)\big)\to B\Big)\to B$ by $f(g):\eq(g\ci\inr)(g\ci\inl).$ Putting $B:\equiv\mb0$ gives the desired result.

%%

\section{Chapter 2}

\subsection{Proof of Theorem 2.7.2}

The map 
\begin{equation}\label{272}
(w=w')\to\sum_{p:\pr_1(w)=\pr_1(w')}p_\star(\pr_2(w))=\pr_2(w')
\end{equation}
can also be defined by the formula 
$$
r\mapsto(\ap_{\pr_1}(r),\apd_{\pr_2}(r)).
$$ 

%%

\subsection{Comment after Corollary 2.7.3}

We write 
$$
\pa:\left(\sum_{p:\pr_1w=\pr_1w'}(\pr_\star\pr_2w=\pr_2w')\right)\to(w=w').
$$ 
for ``the'' inverse of \eqref{272}. We then have the propositional computation rules 
$$
\ap_{\pr_1}(\pa(p,q))=p,
$$
$$
\apd_{\pr_2}(\pa(p,q))=q
$$
for $(p,q):\sum_{p:\pr_1(w)=\pr_1(w')}p_\star(\pr_2(w))=\pr_2(w')$, and the propositional uniqueness principle 
$$
r=\pa(\ap_{\pr_1}(r),\apd_{\pr_2}(r))
$$ 
for $r:w=w'$.

%%

\subsection{Theorem 2.7.4}\label{274}

We wish to rewrite the last display of Theorem 2.7.4 in a slightly more explicit way. We abbreviate $\sum_{u:P(x)}Q(x,u)$ by $Q'(x)$, and $\tr$ by $\ms t$; and we write $\pa_P$ instead of $\pa$ to emphasize the fact that this operation is taken with respect to the type family $P:A\to\U$. Here is the rewriting:
$$
\ms t^{Q'}(p,(u,z))=\Bigg(\ms t^P(p,u),\ms t^Q\bigg(\pa_P\Big(p,\refl_{\ms t^P(p,u)}\Big),z\bigg)\Bigg).
$$ 
The key step to check that the above equality is well-typed is the judgment 
$$
\pa_P\Big(p,\refl_{\ms t^P(p,u)}\Big):(x,u)=_{\sum_{x:A}P(x)}\big(y,\ms t^P(p,u)\big).
$$ 

%%

\subsection{Definition of the map \textsf{happly} in (2.9.2)}

The map 
$$
\happly:(f=g)\to\prod_{a:A}f(a)=g(a)
$$ 
for $f,g:\prod_{x:A}B(x)$ is defined in the obvious way by path induction. If 
$$
e:\prod_{x:A}\left(\prod_{y:A}B(y)\right)\to B(x)
$$ 
is the evaluation, \emph{i.e.} $e(x)(f):\eq f(x)$, then we have, again by path induction, 
$$
\happly(p)(x)=\ap_{e(x)}(p)
$$ 
for $p:f=g$ and $x:A$. 

%%

\subsection{Display preceding (2.9.5)}

Note that $p^{-1}_\star(a)$ and $\tr^A(p^{-1},a)$ designate the same object, and that we have 
$$
\pa(p^{-1},\refl_{p^{-1}_\star(a)}):(x_1,p^{-1}_\star(a))=_{\sum_{x:X}A(x)}(x_2,a).
$$ 

%% 

\subsection{Lemma 2.9.7}

Recall the statement of the Lemma: Let 
$$
A:X\to\U,\quad B:\prod_{x:X}A(x)\to\U,\quad\widehat B:\left(\sum_{x:X}A(x)\right)\to\U
$$ 
be type families such that $\widehat B(w):\eq B(\pr_1w,\pr_2w)$ for all $w:\sum_{x:X}A(x)$, and let 
$$
p:x=y,\quad f:\prod_{a:A(x)}B(x,a),\quad g:\prod_{a:A(y)}B(y,a).
$$ 
Then we have an equivalence 
$$
\big(p_\star(f)=g\big)\simeq\prod_{a:A(x)}\tr^{\widehat B}\Big(\pa(p,\refl_{p_\star(a)}),f(a)\Big)=g(p_\star(a)).
$$ 

It is written, after the Lemma: ``We leave it to the reader to prove this and to formulate a suitable computation rule''. I think this means the following:

If $q:p_\star(f)=g$ corresponds under this equivalence to $\widehat q$, then for $a:A(x)$, the path 
$$
\happly(q,p_\star(a)):(p_\star(f))(p_\star(a))=g(p_\star(a))
$$ 
is equal to the composite 
\begin{align*}
\big(p_\star(f)\big)\big(p_\star(a)\big)&=\tr^{\widehat B}\bigg(\pa\left(p^{-1},\refl_{p^{-1}_\star(p_\star(a))}\right)^{-1},f\Big(p^{-1}_\star\big(p_\star(a)\big)\Big)\bigg)\\ 
&=\tr^{\widehat B}\Big(\pa\left(p,\refl_{p_\star(a)}\right),f(a)\Big)\\
&=g\big(p_\star(a)\big),
\end{align*}
where the first path is given by the display preceding (2.9.5), and the third path is given by $\widehat q$. Note the judgments
$$
\pa\left(p^{-1},\refl_{p^{-1}_\star(p_\star(a))}\right):\big(y,p_\star(a)\big)=_{\sum_{x:X}A(x)}\Big(x,p^{-1}_\star\big(p_\star(a)\big)\Big),
$$ 

$$
\pa\left(p,\refl_{p_\star(a)}\right):(x,a)=_{\sum_{x:X}A(x)}\big(y,p_\star(a)\big).
$$ 

%%

\subsection{Proof of Theorem 2.11.1}\label{2111}

Let $f:A\to B$ be an equivalence, and let $a,a':A$. We must show that 
$$
\ap_f:(a=a')\to (fa=fa')
$$ 
is an equivalence.

Step 1. (This step is the the same as in the book; I spell it out for the reader's convenience.) Let $g:B\to A$ be an inverse to $f$, let $\beta:g\circ f=\id_A$, and define 
$$
\varphi:(gfa=gfa')\to(a=a')\quad\text{by}\quad\varphi(q):\equiv\beta_a^{-1}\cdot q\cdot\beta_{a'}.
$$ 
Note, as in the book, that the equality $\varphi\circ\ap_g\circ\ap_f=\id_{a=a'}$ follows from the functoriality of $\ap$ and the naturality of homotopies, Lemmas 2.2.2 and 2.4.3. (Here $\ap_g:(fa=fa')\to (gfa=gfa')$.)

Step 2. Since $\varphi$ is an equivalence (see Example 2.4.8 in the book), $\ap_g\circ\ap_f$ is also an equivalence, and so is, by symmetry, $\ap_f\circ\ap_g$. Exercise 4.5 (see \S\ref{45} below) implies that $\ap_f$ and $\ap_g$ are equivalences.

%old: https://docs.google.com/document/d/1OvMAEN0uvE18rTCHAmZAIYKiILQ_FNT5JJqNH3HH760/edit

%%

\subsection{Proof of Theorem 1.12.5}

The equality 
$$
\encode(\inl(a),\decode(\inl(a),c))=c
$$ 
for $c:a_0=a$ can be proved by based path induction.

%%

\subsection{Double recursion in \S2.13}

(There is a short reminder of the recursor for $\N$ at the end of this section.) The statement below is used several times in \S2.13 of the book.

For any type $C$, any maps 
$$
g,h:\N\to C,\quad k:\N\to\N\to C\to C,
$$ 
there is a map $f:\N\to\N\to C$ satisfying 
$$
f(0)\equiv g,\quad f(\su(m),0)\equiv h(m),\quad f(\su(m),\su(n))\equiv k(m,n,f(m,n))
$$ 
for all $m,n:\N$.

Indeed, it suffices to put 
$$
f:\equiv\rec_\N(\N\to C,g,d_s),
$$ 
where 
$$
d_s:\N\to(\N\to C)\to(\N\to C)
$$ 
is defined by 
$$
d_s(m,x):\equiv\rec_\N(C,h(m),c_s),
$$ 
where 
$$
c_s:\N\to C\to C
$$ 
is defined by 
$$
c_s(n,y):\equiv k(m,n,x(n)).
$$ 
One can also define $f$ by the single formula
$$
f\equiv\rec_\N\Bigg(\N\to C,g,m\mapsto x\mapsto\rec_\N\bigg(C,h(m),n\mapsto y\mapsto k\big(m,n,x(n)\big)\bigg)\Bigg).
$$ 
For the reader's convenience we briefly recall the definition of the recursor for $\N$:
$$\rec_\N:\prod_{C:\U}C\to(\N\to C\to C)\to\N\to C$$

$$\rec_\N(C,c_0,c_s,0):\eq c_0,$$

$$\rec_\N(C,c_0,c_s,\su(n)):\eq c_s(n,\rec_\N(C,c_0,c_s,n)).$$

%%

\subsection{Double induction in \S2.13}

(There is a short reminder of the induction principle for $\N$ at the end of this section.) For any type family $C:\N\to\N\to\U$, any dependent functions
$$
g:\prod_{n:N}C(0,n),\quad h:\prod_{m:N}C(\su(m),0),
$$
$$
k:\prod_{m,n:N}C(m,n)\to C(\su(m),\su(n)),
$$ 
there is a dependent function $f:\prod_{m,n:\N}C(m,n)$ satisfying 
$$
f(0)\equiv g,\quad f(\su(m),0)\equiv h(m),\quad f(\su(m),\su(n))\equiv k(m,n,f(m,n))
$$ 
for all $m,n:\N$.

Indeed, it suffices to define $C':\N\to\U$ by 
$$
C'(m):\eq\prod_{n:\N}C(m,n)
$$ 
and to put 
$$
f:\equiv\ind_\N\left(C',g,d_s\right),
$$ 
where 
$$
d_s:\prod_{m:\N}\left(\prod_{n:\N}C(m,n)\right)\to\prod_{n:\N}C(\su(m),n)
$$ 
is defined by 
$$
d_s(m,x):\equiv\ind_\N\Big(C'(\su(m)),h(m),c_s\Big),
$$ 
where 
$$
c_s:\prod_{n:\N}C(\su(m),n)\to C(\su(m),\su(n))
$$ 
is defined by 
$$
c_s(n,y):\equiv k(m,n,x(n)).
$$ 
For the reader's convenience we briefly recall the definition of the induction principle for $\N$:
$$\ind_\N:\prod_{C:\N\to\U}C(0)\to\left(\prod_{n:\N}C(n)\to C(\su(n))\right)\to\prod_{n:\N} C(n)$$

$$\ind_\N(C,c_0,c_s,0):\eq c_0,$$

$$\ind_\N(C,c_0,c_s,\su(n)):\eq c_s(n,\ind_\N(C,c_0,c_s,n)).$$

%%

\subsection{Section 2.14.1}

\subsubsection{Use of Theorem 2.7.4}

We apply Theorem 2.7.4 to \S2.14.1 by letting $\U,\V$ be universes with $\U:\V$, by defining $P:\U\to\V$ by $P(A):\eq(A\to A\to A)$, by defining 
$$
Q:\left(\sum_{A:\U}P(A)\right)\to\V
$$ 
by 
$$
Q(A,m):\eq\prod_{x,y,z:A}m(x,m(y,z))=m(m(x,y),z),
$$ 
and by defining $Q':\U\to\V$ by 
$$ 
Q'(A):\eq\sum_{m:P(A)}Q(A,m).
$$
%setting $A:\eq\U,P(A):\eq(A\to A\to A)$ for $A:\U$, $$Q:\left(\sum_{A:\U}(A\to A\to A)\right)\to\U,\quad Q(A,m):\eq(m(x,m(y,z))=m(m(x,y),z)).$$ As \S\ref{274} we put $$Q'(A):\eq(m(x,m(y,z))=m(m(x,y),z))$$ for $A:\U$. 
In the notation of \S\ref{274} the last display of Theorem 2.7.4 now reads 
$$
\ms t^{Q'}(p,(m,a))=\Bigg(\ms t^P(p,m),\ms t^Q\bigg(\pa_P\Big(p,\refl_{\ms t^P(p,m)}\Big),a\bigg)\Bigg)
$$ 
with $p:\eq\ua(e)$.

\subsubsection{A general comment}

The main purpose of \S2.14.1 is to obtain the formulas
$$
m'(b_1,b_2)=e(m(e^{-1}(b_1),e^{-1}(b_2)))
$$ 
and
\begin{equation*}
  \begin{aligned}
    m'(m'(b_1,b_2),b_3)
    &= e(m(e^{-1}(m'(b_1,b_2)),e^{-1}(b_3))) \\
    &= e(m(e^{-1}(e(m(e^{-1}(b_1),e^{-1}(b_2)))),e^{-1}(b_3))) \\
    &= e(m(m(e^{-1}(b_1),e^{-1}(b_2)),e^{-1}(b_3))) \\
    &= e(m(e^{-1}(b_1),m(e^{-1}(b_2),e^{-1}(b_3)))) \\
    &= e(m(e^{-1}(b_1),e^{-1}(e(m(e^{-1}(b_2),e^{-1}(b_3)))))) \\
    &= e(m(e^{-1}(b_1),e^{-1}(m'(b_2,b_3)))) \\
    &= m'(b_1,m'(b_2,b_3)).
\end{aligned}
\end{equation*}
(We refer the reader to the book for the precise notation. The above chain of equalities is preceded by the sentence ``Moreover, though we do not show the proof, one can calculate that the induced proof that $m'$ is associative \dots\ is equal to a function sending $b_1,b_2,b_3:B$ to a path given by the following steps''. The main ingredient is Theorem 2.7.4.)

It seems to me one could argue as follows: state the above two formulas, check that they are well-typed, check that they hold when $A\eq B$ and $p$ is reflexivity, conclude by path induction that they hold in general.

%%

\subsection{Exercise 2.7}

\emph{Statement.} State and prove a generalization of Theorem 2.6.5 from cartesian products to $\Sigma$-types. 

\nn\emph{Solution.} We denote respectively by $\alpha$ and $\beta$ the dependent functions $f$ and $g$ in the proof of Theorem 2.7.2. Note that we have 
$$
\beta(z,z,\refl_{\pr_1(z)},\refl_{\pr_2(z)})\equiv\refl_z.
$$

Let 
$$
B:A\to\U,\quad B':A'\to\U,\quad g:A\to A',\quad h:\prod_{a:A}B(a)\to B'(g(a)).
$$ 
Cleary, there is a map 
$$
f:\left(\sum_{a:A}B(a)\right)\to\sum_{a':A'}B'(a')
$$ 
satisfying $f(a,b)\equiv (g(a),h(a,b))$ for all $a:A$ and all $b:B(a)$. 

By path induction, we get a family of paths 
$$
\gamma(z,w,p):f(p)=\beta\Big(f(z),f(w),\alpha\big(f(z),f(w),f(p)\big)\Big),
$$ 
where $z,w:\sum_{a:A}B(a)$ and $p:z=w$, satisfying 
$$
\gamma(z,z,\refl_z)\equiv\refl_{\refl_{f(z)}}.
$$

%%

\subsection{Exercise 2.14}

\emph{Statement.} Suppose we add to type theory the \emph{equality reflection rule} which says that if there is an element $p:x=y$, then in fact $x\equiv y$. Prove that for any $p:x=x$ we have $p\equiv\refl_x$. (This implies that every type is a \emph{set} in the sense to be introduced in \S3.1; see \S7.2.)

\nn\emph{Solution.} Given $x$ we construct $f(y,p):p=\refl_x$ for $p:x=y$ by based path induction. Note that $p=\refl_x$ is a well-defined type because $p:x=y$ (our current assumption) implies $y\equiv x$ by the equality reflection rule.

%%

\section{Chapter 3}

\subsection{Proof of Lemma 3.1.8}\label{318}

Recall the statement: 

If $A$ is a set (that is, $\isSet(A)$ is inhabited), then $A$ is a 1-type. 

Here is a slightly different wording of the proof:

Suppose $f:\isSet(A)$ and let $x,y:A$. For any $p,q:x=y$ we have $f(p,q):p=q$. For $q':x=y$ and $r:q=q'$ we prove 
$$
r=f(p,q)^{-1}\cdot f(p,q')
$$ 
by path induction on $r$.

%%

\subsection{Theorem 3.2.2} 

Here is a minor variant. Set 
$$
F:\eq\prod_{A:\U}\neg\neg A\to A,\qquad G:\eq\prod_{A:\U}\lV\mb2=A\rV\to A.
$$ 
It suffices to prove $F\to G$ and $\neg G$. 

\emph{Proof of} $F\to G$. Given $f:F$ we must define $g:G$. It suffices define 
$$
h:\lV\mb2=A\rV\to\neg\neg A
$$ 
for $A=\U$, and to set $g(A,u):\eq f(A,h(u))$. It suffices in turn to define 
$$
h':(\mb2=A)\to\neg\neg A.
$$ 
To do this, we set $h'(p,k):\eq k(p_\star(0_{\mbf2}))$. 

\emph{Proof of} $\neg G$. Similar to the proof of $\neg F$ (that is, the proof of Theorem 3.2.2) in the book.$\square$

The (limited) interest of this comment is that, given a type $B$, it might be easier to prove $B\to G$ than to prove $B\to F$ (or to prove $B\to\mbf0$ directly).

%The proof of Theorem 3.2.2 shows the following:

%If $P:\U\to\U$ is a type family over $\U$ such that $P(A)$ is a mere proposition for all $A:\U$, then it is not the case that for all $A:\U$ we have $P(A)\to A$.

%%

\subsection{Proof of Lemma 3.3.4}

Recall the statement: Every mere proposition is a set. In the proof of Lemma 3.1.8 in \S\ref{318} above we derived the conclusion that $x=y$ is a set using only the assumption that $x=y$ is a mere proposition.

%%

\subsection{Proof of Lemma 3.11.4} 

Recall the statement: 

For any type $A$, the type $\isContr(A)$ is a mere proposition.

Here is a minor variant of the proof:

Let $c,c':\isContr(A)$. Since $A$ is contractible (by $c$ or $c'$), Lemma 3.11.3 implies $A=\mb1$, and thus 
$$
\isContr(A)=\left(\sum_{a:\mb1}\prod_{x:\mb1}a=x\right)=\left(\sum_{a:\mb1}\prod_{x:\mb1}\mb1\right)=\left(\sum_{a:\mb1}\mb1\right)=\mb1.
$$

%%

\subsection{Proof of Lemma 3.11.8} 

Recall the statement: 

For any $A$ and any $a:A$, the type $\sum_{x:A}a=x$ is contractible with center $(a,\refl_a)$. 

Here is a minor variant of the proof:

We prove $(x,p)=(a,\refl_a)$ for any $(x,p):\sum_{x:A}a=x$ by based path induction.

%%

%\begin{comment}\subsection{Lemma 3.11.9} Lemma 3.11.9 (i) yields the following strengthening of Lemma 3.5.1:

%In the setting of Lemma 3.5.1, the map $$\ap_{\pr_1}:(u=v)\to(\pr_1(u)=\pr_1(v))$$ is an equivalence.\end{comment}

%%

\subsection{Exercise 3.5}

\emph{Statement.} Show that $\isProp(A)\simeq(A\to\isContr(A))$. 

\nn\emph{Solution.} Recall the definitions: 
$$
\isProp(A):\eq\prod_{a,b:A}a=b,\quad\isContr(A):\eq\sum_{a:A}\prod_{b:A}a=b.
$$

By Lemma 3.3.5 the type $\isProp(A)$ is a mere proposition. By Example 3.6.2 and Lemma 3.11.4 the type $A\to\isContr(A)$ is also a mere proposition. By Lemma 3.3.3 it suffices to show that $\isProp(A)$ and $A\to\isContr(A)$ are logically equivalent. 

We define 
$$
u:\isProp(A)\to(A\to\isContr(A)),\quad v:(A\to\isContr(A))\to\isProp(A)
$$ 
by 
$$
\big(u(f)(a)\big)(b):\eq(a,f(a,b)),\quad v(g)(a,b):\eq\pr_2(g(a))(a)^{-1}\cdot\pr_2(g(a))(b).
$$%$u(f)(a):\eq(a,f(a,-))$. 

%We define $u:\isProp(A)\to(A\to\isContr(A))$ by $\big(u(f)(a)\big)(b):\eq(a,f(a,b))$.%$u(f)(a):\eq(a,f(a,-))$. 

%We define $v:(A\to\isContr(A))\to\isProp(A)$ by $v(g)(a,b):\eq\pr_2(g(a)(a)^{-1}\cdot \pr_2(g(a,b))$.

%as follows. Let $g:A\to\isContr(A)$. For any $a:A$ we have $g(a)=(g_1(a),g_2(a))$ with $g_1(a):A$ and $g_2(a):\prod_{b:A}g_1(a)=b$. Thus we can put $v(g)(a,b):\eq g_2(a,a)^{-1}\cdot g_2(a,b)$.


%%

\subsection{Exercise 3.6}\label{e36}

\emph{Statement.} Show that if $A$ is a mere proposition, then so is $A+\neg A$.

\nn\emph{Proof.} For $a_1,a_2:A$ we have $a_1=a_2$ because $A$ is a mere proposition, and thus $\inl(a_1)=\inl(a_2)$. For $a_1',a_2':\neg A$ we have $a_1'=a_2'$ because $\neg B$ is a mere proposition for any type $B$, and thus $\inr(a_1')=\inr(a_2')$. Let $a:A$ and $a':\neg A$. We must show $\inl(a)=\inr(a')$. Let $f:\mb0\to(\inl(a)=\inr(a'))$, and note that $f(a'(a)):\inl(a)=\inr(a')$.

%%

\subsection{Exercise 3.7}

We assume that $A$ and $B$ are mere propositions, and that $\neg(A\times B)$ is inhabited. We claim that $A+B$ is a mere proposition. It suffices to prove $x=y$ in the following cases:

(a) $x=\inl(a),\ y=\inl(a')$,

(b) $x=\inr(b),\ y=\inr(b')$,

(c) $x=\inl(a),\ y=\inr(b)$.

\nn We leave Cases (a) and (b) to the reader, and take up Case~(c). Let $f:A\times B\to\mb0$ and $g:\mb0\to(\inl(a)=\inr(b))$. We get $g(f(a,b)):\inl(a)=\inr(b)$.

%%

\subsection{Exercise 3.9}

We admit the Law of Excluded Middle $\LEM$ defined in (3.4.1) by 
$$
\LEM:\prod_{A:\U}\isProp(A)\to(A+\neg A),
$$ 
and we want to prove 
\begin{equation}\label{e39}
\left(\sum_{A:\U}\isProp(A)\right)\simeq\mb2.
\end{equation}
\emph{Proof of \eqref{e39}.} By Lemma 3.3.2 we have 
$$
f_1:\prod_{A:\U}\isProp(A)\to A\to(A=\mb1). 
$$ 
It is easy that we have 
$$
f_2:\prod_{A:\U}\neg A\to(A=\mb0). 
$$ 
Define 
$$
f_3:\prod_{A:\U}\isProp(A)\to(A+\neg A)\to((A=\mb1)+(A=\mb0))
$$ 
by 
$$
f_3(A,p,\inl(a)):\eq\inl(f_1(A,p,a),\qquad f_3(A,p,\inr(a')):\eq\inr(f_2(A,a').
$$ 
Define 
$$
f_4:\prod_{A:\U}\isProp(A)\to\big((A=\mb1)+(A=\mb0)\big)
$$ 
by 
$$
f_4(A,p):\eq f_3(A,p,\LEM(A,p)).
$$ 
In view of $f_4$ we can define 
$$
f_5:\left(\sum_{A:\U}\isProp(A)\right)\to\mb2
$$ 
by 
$$
f_5(A,p):\eq
\begin{cases}
1_\mb2&\text{if }A=\mb1\\
0_\mb2&\text{if }A=\mb0.
\end{cases}
$$ 
Let $p_0:\isProp(\mb0)$ and $p_1:\isProp(\mb1)$, and define 
$$
f_6:\mb2\to\left(\sum_{A:\U}\isProp(A)\right)
$$ 
by $f_6(0_\mb2):\eq(\mb0,p_0)$ and $f_6(1_\mb2):\eq(\mb1,p_1)$.

It is straightforward to check that $f_5\ci f_6=\id_\mb2$. 

Let $A:\U$ and $p:\isProp(A)$. We must show 
\begin{equation}\label{f6f5}
f_6(f_5(A,p))=(A,p).
\end{equation}
In view of $f_4$ it suffices to prove that \eqref{f6f5} holds if $A=\mb1$ or if $A=\mb0$, which is easy. $\square$ 

Note that the Law of Excluded Middle $\LEM$ is equivalent to 
$$
\LEM':\prod_{A:\U}\isProp(A)\to\big((A=\mb1)+(A=\mb0)\big)
$$ 

%%

\subsection{Exercise 3.17}%\label{69}

Here is a slightly more precise statement:

Show that the rules for the propositional truncation given in \S3.7 of the book are sufficient to imply the following induction principle: given $B:\lV A\rV\to\Prop$ and $f:\prod_{a:A}B(\lv a\rv)$, there is a $g:\prod_{x:\lV A\rV}B(x)$ such that $g(\lv a\rv)=f(a)$ for all $a:A$.

Proof. Let $p:\ip(\lV A\rV)$ (\emph{i.e.} $p(x,y):x=y$ for all $x,y:\lV A\rV$) and $x:\lV A\rV$. The map $h:A\to B(x)$ defined by 
$$
h(a):\eq p(\lv a\rv,x)_\star(f(a))
$$ 
induces a map $k:\lV A\rV\to B(x)$ such that $k(\lv a\rv)\eq h(a)$ for all $a:A$, and we can set $g(x):\eq k(x)$. This yields 
$$
g(\lv a\rv)\eq k(\lv a\rv)\eq h(a)\eq p(\lv a\rv,\lv a\rv)_\star(f(a))=f(a).\square
$$

%%

\subsection{Exercise 3.18}

\emph{Statement.} Show that the law of excluded middle (3.4.1) and the law of double negation (3.4.2) are logically equivalent.

\nn\emph{Proof.} To prove that the law of excluded middle implies the law of double negation, we assume that the types 
$$
\isProp(A),\quad A+\neg A,\quad \neg\neg A
$$ 
are inhabited, and we show that so is $A$ as follows. Let $x:A+\neg A$. If $x\eq\inl(a)$ for some $a:A$ we are done. If $x\eq\inr(a')$ for some $a':\neg A$, we let $f:\mb0\to A$ and $a'':\neg\neg A$, and get $f(a''(a')):A$. 

To prove that the law of double negation implies the law of excluded middle, we let $A$ be a mere proposition, and we show that $A+\neg A$ is inhabited as follows. By exercise 3.6, $A+\neg A$ is also a mere proposition, and thus there is a map $\neg\neg(A+\neg A)\to A+\neg A$. Hence it suffices to check that $\neg\neg(A+\neg A)$ is inhabited. To this end, we define $x'':\neg\neg(A+\neg A)$ by $x''(x'):\eq(x'\circ\inr)(x'\circ\inl)$.

%%

\section{Chapter 4}

\subsection{Proof of Lemma 4.1.2}

Let us denote by $(\star)$ the claim 

\nn ``$h$ is identified with $h'$ when transported along this equality, which by transport in identity types and function types, reduces to showing 
$$
h(s)=h(p)\cdot h'(p)^{-1}\cdot h'(s)
$$ 
for any $s:a=x$''

\nn in the proof of Lemma 4.1.2 in the HoTT Book. We make three observations:

\nn(1) The fact that $(\star)$ implies that $B(x)$ is a mere proposition follows from Theorem 2.7.2. 

\nn(2) The statement $(\star)$ itself follows from the Lemma below, which is easily proved by path induction:

\nn\textbf{Lemma.} Let $A$ be a type; let $a,x:A$; let $q:a=a$; let $P:(x=x)\to\U$ be defined by 
$$
P(r):\equiv\prod_{s:a=x}(r=s^{-1}\cdot q\cdot s);
$$ 
and let 
$$
r,r':x=x,\qquad t:r=r',\qquad h:P(r),\qquad s:a=x.
$$ 
Then 
$$
\transport^P(t,h)(s)=t^{-1}\cdot h(s).
$$ 

\nn(3) To complete the proof of Lemma 4.1.2, we set $f(x):\eq\pr_1(k(x))$ with $k:\prod_{x:A}B(x)$.

%%

\subsection{Proof of Lemma 4.2.11}

Use also Theorem 2.15.7.

%%

%\subsection{Corollary 4.4.6}Here is a slightly more general statement:\\ To each pair of maps $f:A\to B,P:B\to\U$ is attach a map $$g:\left(\prod_{b:B}P(b)\right)\to\prod_{a:A}P(f(a))$$ defined by $$g(h)(a):\eq h(f(a)).$$
%For any type family $P$ over a type $A$ there is a map $$f:\left(A\to\prod_{a:A}P(a)\right)\to\prod_{a:A}P(a).$$ In words: If $A$ implies $\prod_{a:A}P(a)$, then $\prod_{a:A}P(a)$ is true.

%Indeed it suffices to set $f(g,a):\eq g(a,a)$.

%%

\subsection{Proof of Lemma 4.7.3}

I would replace ``applying a version of Lemma 3.11.9'' with ``using based path induction''.

%I don't understand the proof of the book. It seems to me Lemma 4.7.3 results from the following computation, where most of the parenthesis are omitted \begin{align*}(Ra)_\star(Ksa\cdot r'La\cdot r's'p\cdot R'b)&=(gRa)^{-1}\cdot Ksa\cdot r'La\cdot r's'p\cdot R'b\\ &=(gRa)^{-1}\cdot gRa\cdot (R'ga)^{-1}\cdot r's'p\cdot R'b\\ &=p,\end{align*} the second equality being induced by $Ha$.

%%

\subsection{Proof of Theorem 4.7.6}

Let us check Equivalence $(\star)$ in the proof of Theorem 4.7.6: Recalling that $x:A$ and $v:Q(x)$ are given, set for $a:A$ and $p:a=x$ 
$$
R(a,p):\equiv\sum_{u:P(a)}p_\star(f(a,u))=v.
$$ 

Claim: 
$$
\ga(\sum_{a:A}\sum_{p:a=x}R(a,p)\dr)\overset{(\text a)}{\simeq}
\ga(\sum_{z:\sum_{a:A}a=x}R(z)\dr)\overset{(\text b)}{\simeq}
R(x,\refl_x).
$$

Proof: Equivalence (a) follows from Exercise 2.10. As Lemma 3.11.8 implies that 
$$
\sum_{a:A}\ a=x
$$ 
is contractible with center $(x,\refl_x)$, Equivalence (b) follows from Lemma 3.11.9 (ii). $\square$

%%

\subsection{Proof of Lemma 4.8.1}%\label{69}

Recall the statement:

For any type family $B:A\to\U$, the fiber of $\pr_1:\sum_{x:A}B(x)\to A$ over $a:A$ is equivalent to $B(a)$:
$$
\fib_{\pr_1}(a)\simeq B(a).
$$

Proof. We have
\begin{align*}
\fib_{\pr_1}(a)&:\eq\sum_{u:\sum_{x:A}B(x)}\pr_1(u)=a\\
&\simeq\sum_{x:A}\sum_{b:B(x)}x=a&\text{by Exercise 2.10}\\
&\simeq\sum_{x:A}\sum_{p:x=a}B(x)\\
&\simeq\sum_{z:\sum_{x:A}x=a}B(\pr_1(z))&\text{by Exercise 2.10}\\
&\simeq B(\pr_1(a,\refl_a))&\text{by Lemmas 3.11.8 and 3.11.9(ii)}\\
&\eq B(a).\ \square
\end{align*}

%%

\subsection{Proof of Lemma 4.8.2}\label{482}

Here is a minor variant to the proof of Lemma 4.8.2. Recall the statement:

For any function $f:A\to B$, we have $A\simeq\sum_{b:B}\fib_f(b)$.

Recall Definition 4.2.4: The fiber of a map $f:A\to B$ over a point $b:B$ is 
$$
\fib_f(b):\eq\sum_{a:A}f(a)=b.
$$ 
In particular $\fib_f$ is a type family over $B$. The corresponding transport can be described as follows. Let $p:b=_Bb'$ and $(a,q):\fib_f(b)$, that is $a:A$ and $q:f(a)=b$. Then we have 
\begin{equation}\label{paq}
p_\star(a,q)=(a,q\cdot p).
\end{equation}

Set 
$$
C:\eq\sum_{b:B}\fib_f(b):\eq\sum_{b:B}\sum_{a:A}f(a)=b.
$$ 
We must show $A\simeq C$. Define $g:A\to C$ and $h:C\to A$ by 
$$
g(a):\eq(f(a),a,\re_{f(a)}),\qquad h(b,a,p):\eq a.
$$ 
We claim that $g$ and $h$ are inverses. It is easy to check $h\ci g=\id_A$. Let $(b,a,p):C$. It only remains to show $(f(a),a,\re_{f(a)})=(b,a,p)$. But this follows from \eqref{paq}. $\square$

%%

\subsection{Proof of Theorem 4.8.3}

Here are some details about the last sentence of the proof of Theorem 4.8.3:

Firstly we rewrite (2.9.4) as follows. Abbreviating transport by $\ms t$ we have 
\begin{equation}\label{2.9.4}
\ms t^{A\to B}(p,f,a_2)=\ms t^B(p,f(\ms t^A(p^{-1},x)))
\end{equation}
for $p:x_1=_Xx_2,\ f:A(x_1)\to B(x_1),\ a_2:A(x_2)$. 

Now let us move to last sentence of the proof of Theorem 4.8.3. Put
$$
F:\equiv\sum_{b:B}\oo{fib}_f(b),
$$ 
and let $\pr_1:F\to B$ be the first projection. We must show 
\begin{equation}\label{2}
(F,\pr_1)=_{\sum_{X:\U}X\to B}(A,f).
\end{equation} 
We have $e:F\simeq A$. Put $q:\equiv\ua(e)$. We have $q:F=A$. We claim 
\begin{equation}\label{3}
q_\star(\pr_1)=f.
\end{equation} 
By Theorem 2.7.2, \eqref{3} will imply \eqref{2}. For all $X:\U$ set $I(X)\equiv X,\ C(X)\equiv B$. Then \eqref{3} becomes, in the notation of (2.9.4), 
$$
\ms t^{I\to C}(q,\pr_1)=f.
$$ 
Let $a:A$. We must show 
$$
\ms t^{I\to C}(q,\pr_1,a)=f(a).
$$ 
We get 
$$
\ms t^{I\to C}(q,\pr_1,a)\overset{\text{(a)}}=\ms t^C(q,\pr_1(\ms t^I(q^{-1},a)))\overset{\text{(b)}}=\pr_1(e^{-1}(a))\overset{\text{(c)}}=f(a),
$$ 
where (a) follows from \eqref{2.9.4}, (b) follows from the computation rule for univalent stated right after Remark 2.10.4, and (c) follows from the definition of $e^{-1}$.

%%

\subsection{Proof of Theorem 4.8.4}

Here is the statement:

\nn\emph{Let $f:A\to B$ be a function. Then the diagram
$$
\xymatrix{
A\ar[r]^-{\theta_f}\ar[d]_{f}&\U_\bullet\ar[d]^{\pr_1}\\
B\ar[r]_{\chi(A,f)} &\U}
$$ 
is a pullback square (see Exercise 2.11). Here the function $\theta_f$ is defined by}
$$
\theta_f(a):\eq\Big(\fib_f\big(f(a)\big),\big(a,\refl_{f(a)}\big)\Big).
$$

I don't understand the proof of the equivalence 
$$
A\simeq\sum_{b:B}\ \sum_{X:\U}\ \sum_{x:X}\ \fib_f(b)=X
$$ 
at the beginning of the proof of Theorem 4.8.4. Here is how I would present things. 

\nn Claim: For any type $A$ we have 
\begin{equation}\label{asimeq}
A\simeq\sum_{X:\U}X\times X=A.
\end{equation}
Proof: Write $\ms t$ for ``transport''. Set $C\eq\sum_{X:\U}X\times X=A$, and define 
$$
f:A\to C,\qquad g:C\to A
$$ 
by 
$$
f(a):\eq(A,a,\re_A),\qquad g(B,b,p):\eq\ms t^{X\mapsto X}(p,b).
$$ 

\nn We have $g(f(a))\eq a$ for all $a:A$. Let $(B,b,p):C$. We have 
$$
f(g(B,b,p))=(A,\ms t^{X\mapsto X}(p,b),\re_A)
$$ 
and we must show 
$$
(B,b,p)=(A,\ms t^{X\mapsto X}(p,b),\re_A).
$$
By Theorem 2.7.2 it suffices to verify 
$$
\ms t^{X\mapsto X\times X=A}(p,(b,p))=(\ms t^{X\mapsto X}(p,b),\refl_A).
$$ 
By Theorem 2.6.4 it suffices to prove $\ms t^{X\mapsto X=A}(p,p)=\refl_A$. But this follows from Lemma 2.11.2. $\square$

Going back to the beginning of the proof of Theorem 4.8.4, we get 
$$
A\simeq\ga(\sum_{b:B}\ \fib_f(b)\dr)\simeq\ga(\sum_{b:B}\ \sum_{X:\U}\ X\times X=\fib_f(b)\dr)
$$
$$
\simeq\sum_{b:B}\ \sum_{X:\U}\ \sum_{x:X}\ \fib_f(b)=X,
$$ 
the first equivalence following from Lemma 4.8.2 (see \S\ref{482}), the second one from \eqref{asimeq}, and the third one being straightforward.

%%

\subsection{Exercise 4.4}

\emph{Statement.} (The unstable octahedral axiom). Suppose $f:A\to B$ and $g:B\to C$ and $b:B$.

\nn(i) Show that there is a natural map $\fib_{g\circ f}(g(b))\to\fib_g(g(b))$ whose fiber over $(b, \refl_g(b) )$ is equivalent to $\fib_f(b)$.

\nn(ii) Show that $\fib_{g\circ f}(c)\simeq\sum_{w:\fib_g(c)}\fib_f(\pr_1w)$.

\nn\emph{Solution.} (i) We define 

$$h:\sum_{x:A}g(f(x))=g(b)\to\sum_{y:B}g(y)=g(b)$$ 

\nn by $h(x,p):\eq(f(x),p)$. (Note that $p:g(f(x))=g(b)$.) We get 

$$\fib_h(b,\refl_{g(b)}):\eq\sum_{w:\sum_{x:A}g(f(x))=g(b)}h(w)=(b,\refl_{g(b)})$$ 

$$=\sum_{x:A}\sum_{p:g(f(x))=g(b)}(f(x),p)=(b,\refl_{g(b)}).$$ 

\nn For each $x:A$ we have

$$\sum_{p:g(f(x))=g(b)}(f(x),p)=(b,\refl_{g(b)})$$ 

$$=\sum_{p:g(f(x))=g(b)}\ \sum_{q:f(x)=b}\transport^{\la(z:C).z=g(b)}(q,p)=\refl_{g(b)}$$ 

$$=\sum_{p:g(f(x))=g(b)}\ \sum_{q:f(x)=b}\ap_g(q)^{-1}\cdot p=\refl_{g(b)}$$ 

$$=\sum_{q:f(x)=b}\ \sum_{p:g(f(x))=g(b)}p=\ap_g(q)$$ 

$$=(f(x)=b).$$ 

\nn(ii) We have 

$$\sum_{w:\fib_g(c)}\fib_f(\pr_1w)$$ 

$$=\sum_{w:\sum_{y:B}g(y)=c}\ \sum_{x:A}f(x)=\pr_1w$$ 

$$=\sum_{y:B}\ \sum_{q:g(y)=c}\ \sum_{x:A}f(x)=y$$ 

$$=\sum_{x:A}\ \sum_{y:B}\ (g(y)=c)\times(f(x)=y)$$ 

\nn For each $x:A$ we check that the maps 

$$\ph:\left(\sum_{y:B}\ (g(y)=c)\times(f(x)=y)\right)\to(g(f(x))=c)$$ 

\nn and 

$$\psi:(g(f(x))=c)\to\sum_{y:B}\ (g(y)=c)\times(f(x)=y)$$ 

\nn defined by 

$$\ph(y,q,p):\eq\ap_g(p)\cdot q,\quad\psi(r):\eq(f(x),r,\refl_{f(x)})$$ 

\nn are inverses. This gives 

$$\left(\sum_{w:\fib_g(c)}\fib_f(\pr_1w)\right)=\left(\sum_{x:A}\ g(f(x))=c\right)=\fib_{g\circ f}(c).$$

%%

\subsection{Exercise 4.5}\label{45}

\emph{Statement.} Prove that equivalences satisfy the 2-out-of-6 property: given $f:A\to B$ and $g:B\to C$ and $h:C\to D$, if $g\circ f$ and $h\circ g$ are equivalences, so are $f,g,h$, and $h\circ g\circ f$. Use this to give a higher-level proof of Theorem 2.11.1.

\nn\emph{Solution.} Setting $k:\eq f\circ (g\circ f)^{-1}$, we get 
\begin{align*}
k&:\eq f\circ (g\circ f)^{-1}\\
&=\big((h\circ g)^{-1}\circ h\circ g\big)\circ f\circ (g\circ f)^{-1}\\
&=(h\circ g)^{-1}\circ h\circ\big(g\circ f\circ (g\circ f)^{-1}\big)\\
&=(h\circ g)^{-1}\circ h,
\end{align*}
and thus $g\circ k=\id_C$ and $k\circ g=(h\circ g)^{-1}\circ h\circ g=\id_B$. This implies that $g$ is an equivalence. The end of the exercise is straightforward. For the higher-level proof of Theorem 2.11.1, see \S\ref{2111}.

%%

\subsection{Exercise 4.6 (iii)}

\emph{Statement.} For $A,B:\U$, define
$$
\mathsf{idtoqinv}_{A,B}:(A=B)\to\sum_{f:A\to B}\mathsf{qinv}(f)
$$
by path induction in the obvious way. Let $\mathsf{qinv}$-$\mathsf{univalence}$ denote the modified form of the univalence axiom which asserts that for all $A,B:\U$ the function $\mathsf{idtoqinv}_{A,B}$ has an inverse.

\nn(i) Show that $\mathsf{qinv}$-$\mathsf{univalence}$ can be used instead of univalence in the proof of function extensionality in $\S$4.9.

\nn(ii) Show that $\mathsf{qinv}$-$\mathsf{univalence}$ can be used instead of univalence in the proof of Theorem 4.1.3.

\nn(iii) Show that $\mathsf{qinv}$-$\mathsf{univalence}$ is inconsistent (i.e. allows construction of an inhabitant of $\mb0$). Thus, the use of a ``good'' version of $\mathsf{isequiv}$ is essential in the statement of univalence.

\nn\emph{Solution.} We leave (i) and (ii) to the reader, and prove (iii). In view of Theorem 4.1.3 it suffices to show that, for any map $f:A\to B$, the type $\mathsf{qinv}(f)$ is a mere proposition. 

For any types $A$ and $B$ we put 
$$
(A\simeq B):\equiv\sum_{f:A\to B}\mathsf{ishae}(f),\quad(A\backsimeq B):\equiv\sum_{f:A\to B}\mathsf{qinv}(f).
$$ 
(Recall that $\mathsf{ishae}(f)$ stands for ``$f$ is a half-adjoint equivalence''.) By Theorem 4.2.3 and the comment preceding it, there are dependent functions 
$$
i:\prod_{A,B:\U}\ \prod_{f:A\to B}\mathsf{ishae}(f)\to\mathsf{qinv}(f),\quad p:\prod_{A,B:\U}\ \prod_{f:A\to B}\mathsf{qinv}(f)\to\mathsf{ishae}(f).
$$ 
For all $A,B:\U$ let $e(A,B):(A=B)\to(A\backsimeq B)$ be the natural map (which we assume to admit an inverse).

Claim: if $f:A\to B$ and $x:\mathsf{qinv}(f)$, then $i(A,B,f,p(A,B,f,x))=x$.
 
Since $(f,x):A\backsimeq B$, we can assume by $\mathsf{qinv}$-univalence and path induction that 
$$
B\equiv A,\quad f\equiv\mathsf{id}_A,\quad x\equiv e(A,A,\mathsf{refl}_A),
$$ 
and the claim follows easily from the definition of $i,p$ and $e$.

For $f:A\to B$ and $x,y:\mathsf{qinv}(f)$ we have $p(A,B,f,x)=p(A,B,f,y)$ because $\mathsf{ishae}(f)$ is a mere proposition, and the claim implies $x=y$, as required. 

%% 

\section{Chapter 5}

\subsection{Induction principle for W-types in \S5.3}%\label{69}

The induction principle for the W-type $W:\eq\underset{a:A}{\ms W}\ B(a)$ can be stated as follows:

Given $A:W\to\U$, the recurrence 
$$
r:\prod_{a:A}\prod_{f:B(a)\to W}\left(\prod_{b:B(a)}E(f(b))\right)\to E(\sup(a,f))
$$ 
admits a solution 
$$
s:\prod_{w:W}E(w)
$$ 
satisfying 
$$
s(\sup(a,f))=r(a,f,s\ci f)
$$ 
for all $a:A$ and all $f:B(a)\to W$.

%%

\subsection{Second bullet of \S5.6}%\label{69}

This is about the comment containing the second bullet of \S5.6:
$$
k:((D\to\Prop)\to\Prop)\to D.
$$ 
The recursion principle can be stated as follows: Given 
$$
f:((D\to\Prop)\to\Prop)\to A,
$$ 
we get $g:D\to A$ such that $g(k(\theta))\eq f(\theta)$ for all $\theta:(D\to\Prop)\to\Prop$.

%%

\subsection{Before Remark 5.6.3}%\label{69}

Just before Remark 5.6.3 we read:

\nn\guillemotleft This is a contradiction: no proposition can be equivalent to its negation. (Supposing $P\Leftrightarrow\neg P$, if $P$, then $\neg P$, and so $\mbf0$; hence $\neg P$, but then $P$, and so $\mbf0$.)\guillemotright

Here are some more details about the above parenthesis:

Let $P$ be a mere proposition, and let $f:P\to P\to\mbf0$ and $g:(P\to\mbf0)\to P$. Define $u:P\to\mbf0$ by $u(p):\eq f(p,p)$ and note that $u(g(u)):\mbf0$.

The key point is that we have a codiagonal map
$$
(A\to A\to B)\to(A\to B).
$$ 
In particular: $(A\to\neg A)\to\neg A$.

%%

\subsection{Displays (5.6.4)--(5.6.7)}%\label{69}

As Display (5.6.4), which reads 
$$
c:(A\to W)\to(B\to C\to W)\to D\to W\to W,
$$ 
can be rewritten as 
$$
c:(A\to W)\to((B\times C)\to W)\to D\to(\mb1\to W)\to W,
$$ 
we can (and do) assume that $c$ has the form 
$$
c:(A\to W)\to D\to W.
$$ 
This allows us to rewrite (5.6.6) as 
$$
f(c(\alpha,\beta))\eq d(\alpha,\beta)
$$ 
and (5.6.7) as 
$$
d:\prod_{\alpha:A\to W}\left(\prod_{a:A} P(\alpha(a))\right)\to\prod_{\beta:B}P(c(\alpha,\beta)).
$$ 

%%

\subsection{Proof of Theorem 5.8.2}\label{582}

Here is a minor rewriting of the proof of the implication (i) $\implies$ (ii) in the proof of Theorem 5.8.2. 

\nn$\bullet\ \ppmap(R,S)$ is inhabited: Setting $D(b,r):\eq S(b),d:\eq s_0$, we get $f:\prod_{b:A}S(b)$ with $f(a_0)=s_0$. Define $g:\prod_{b:A}R(b)\to S(b)$ by $g(b,r):\eq f(b)$. This yields $g(a_0,r_0):\equiv f(a_0)=s_0$, as required. 

\nn$\bullet\ \ppmap(R,S)$ is a mere proposition: Let 
$$
f,g:\prod_{b:A}R(b)\to S(b),\qquad p:f(a_0,r_0)=s_0,\qquad q:g(a_0,r_0)=s_0,
$$ 
so that $(f,p),(g,q):\ppmap(R,S)$. It suffices to prove $(f,p)=(g,q)$. Setting $D(b,r):\eq(f(b,r)=g(b,r)),d:\eq p\cdot q^{-1}$, we get $h:\prod_{b:A}\prod_{r:R(b)}f(b,r)=g(b,r)$ with $h(a_0,r_0)=p\cdot q^{-1}$. Function extensionality yields a path $t:f=g$ satisfying $t_\star(p)=h(a_0,r_0)^{-1}\cdot p=(p\cdot q^{-1})^{-1}\cdot p=q$.%by function extensionality, and finally $t_\star(p)=h(a_0,r_0)^{-1}\cdot p=(p\cdot q^{-1})^{-1}\cdot p=q$.%. It suffices to show $t_\star(p)=q$; this follows from the equalities $t_\star(p)=h(a_0,r_0)^{-1}\cdot p=(p\cdot q^{-1})^{-1}\cdot p$.%, that is $(p\cdot q^{-1})^{-1}\cdot p=q$, which is clear.

%% 

\subsection{Proof of Theorem 5.8.4 (iii)}

By Theorem 2.15.7 the type 
$$
\sum_{g:\prod_{(a,b:A)}R(a,b)\to S(a,b)}\quad\prod_{a:A}\quad g(a,a,r_0(a))=s_0(a)
$$ 
is equivalent to the type
$$
\prod_{a:A}\quad\sum_{g(a):\prod_{(b:a)}R(a,b)\to S(a,b)}\quad g(a,a,r_0(a))=s_0(a).
$$

%\nn(ii)$\implies$(iii) follows from (i)$\implies$(ii) in Theorem 5.8.2 (see \S\ref{582}).

%\nn(iii)$\implies$(iv) is similar to (ii)$\implies$(iii) in Theorem 5.8.2.

%\nn(iv)$\implies$(v) follows from (iii)$\implies$(iv) in Theorem 5.8.2.

%\nn(v)$\implies$(ii) follows from (iv)$\implies$(i) in Theorem 5.8.2.

%%%

\section{Chapter 6}

\subsection{Display (6.2.2)}

If $P$ is a type family over a type $A$ and $p:x=y$ is a path in $A$, then we have 
$$
\apd_f(p):f(x)=^P_pf(y),
$$ 
i.e. $\apd_f(p)$ is a dependent path from $f(x)$ to $f(y)$ over $p$.

%%

\subsection{Lemma 6.4.1}

Recall the statement of the lemma: The type $\mbb S^1$ satisfies $\boucle\neq\refl_{\base}$. 

This implies that $\mbb S^1$ is not a set, and thus, by Lemma 3.3.4, that $\mbb S^1$ is not a mere proposition, and thus, by Lemma 3.11.3, that $\mbb S^1$ is not contractible.

%%

\subsection{Proof of Corollary 6.4.3} % old version: https://docs.google.com/document/d/1wShljhC0168axzA7ucAfvL1Xme5AuXp6i0fhwKzM2xQ/edit

%Recall the statement of Theorem 4.4.5: For any $f:A\to B$ we have $\isContr(f)\simeq\ishae(f)$.

The proof of Corollary 6.4.3 uses the following claim:

\nn Let $A$ and $B$ be types; let $\ph_1:(A\simeq B)\to(A\to B)$ and 
$$
\ph_2:\prod_{u:A\simeq B}\ishae(\ph_1(u))
$$ 
be the first and second projection; and let $u,v:A\simeq B$. Then we have 
\begin{equation}\label{apph}
\ap_{\ph_1}:(u=v)\to(\ph_1(u)=\ph_1(v))
\end{equation}%$\ap_\ph:(u=v)\to(\ph(u)=\ph(v))$ is an equivalence.

\nn Proof of the claim. By Theorem 4.4.5 it suffices to show that the fibers of \eqref{apph} are contractible. Set 
$$
C:\eq\sum_{p:\ph_1(u)=\ph(v)}p_\star(\ph_2(u))=\ph_2(v)
$$ 
and let $\psi_1:C\to(\ph_1(u)=\ph(v))$ be the first projection. By Theorem 2.7.2 there is an equivalence $f:(u=v)\to C$ such that $\psi_1\circ f=\ap_{\ph_1}$. Let $q:\ph_1(u)=\ph_1(v)$. We have $\fib_{\ap_{\ph_1}}(q)\simeq\fib_{\psi_1}(q)$. By Lemma 4.8.1 the latter is equivalent to $q_\star(\ph_2(u))=_{\ishae(f)}\ph_2(v)$. As $\ishae(f)$ is contractible by Theorem 4.2.13, Lemma 3.11.3 implies that it is a mere proposition, and Lemma 3.3.4 implies that it is a set. In particular $q_\star(\ph_2(u))=_{\ishae(f)}\ph_2(v)$ is contractible.

%%

\subsection{Proof of Lemma 6.5.1}

The sentence containing the first display follows from Theorem 2.11.3.

%%

\subsection{Section 6.8}

Here is the \emph{recursion principle} for the pushout $Z:\eq A\sqcup^CB$ attached to 
$$
f:C\to A,\quad g:C\to B:
$$ 

Given 
$$
\alpha:A\to D,\quad\beta:B\to D,\quad\gamma:\prod_{c:C}\alpha(f(c))=\beta(g(c)),
$$ 
there is an $s:Z\to D$ such that 
$$
s\ci\inl\eq\alpha,\quad s\ci\inr\eq\beta,\quad\ap_s(\gl(c))=\gamma(c)
$$ 
for all $c:C$.

Here is the \emph{induction principle}: Let $D:Z\to\U$ be a type family, let 
$$
\alpha:\prod_{a:A}D(\inl(a)),\quad\beta:\prod_{b:B}D(\inr(b)),
$$
$$
\gamma:\prod_{c:C}\ \alpha(f(c))=^D_{\glue(c)}\beta(g(c)).
$$ 
Then there is an $h:\prod_{z:Z}D(z)$ such that 
$$
h\ci\inl\equiv\alpha,\quad h\ci\inr\equiv\beta
$$ 
and $\apd_h(\glue(c))=\gamma(c)$ for all $c:C$. 

Here is the \emph{uniqueness principle}: Let $s,s':Z\to D$ and 
$$
\alpha:\prod_{a:A}s(\inl(a))=s'(\inl(a)),\quad\beta:\prod_{b:B}s(\inr(b))=s'(\inr(b)),
$$
$$
\gamma:\prod_{c:C}\ \alpha(f(c))=^{z\mapsto(s(z)=s'(z))}_{\glue(c)}\beta(g(c)).
$$ 
Then there is an $h:\prod_{z:Z}(s(z)=s'(z))$ such that 
$$
h\ci\inl\equiv\alpha,\quad h\ci\inr\equiv\beta,\quad\apd_h(\glue(c))=\gamma(c)
$$ 
for all $c:C$. 
$$
\star
$$

In the proof of Lemma 6.8.2 let us display the definition of $t\ci c_{\sqcup}:\ms{cocone}_{\mc D}(E)$ and of $\ms s(c):Z\to E$: 
$$
t\ci c_{\sqcup}:\eq(t\ci\inl,t\ci\inr,\ap_t\ci\gl),
$$ 

$$
\ms s(c)\ci\inl:\eq i,\quad\ms s(c)\ci\inr :\eq j,\quad\ap_{\ms s(c)}\ci\gl:=h.
$$ 
(Recall: $t:Z\to E,\ c=(i,j,h):\ms{cocone}_{\mc D}(E)$.)

Some more details about the end of the proof of Lemma 6.8.2:

Set $u:\eq\ms s(t\ci c_\sqcup)$, and let $z:Z,\ x:C$. We want to show $u=t$ using the uniqueness principle. This easily reduces to verifying that 
$$
\refl_{t(\inl(f(x)))}=_{\gl(x)}^{z\mapsto(u(z)=t(z))}\refl_{t(\inr(g(x)))},
$$ 
or, equivalently, 
$$
\transport^{z\mapsto(u(z)=t(z))}(\gl(x),\refl_{t(\inl(f(x)))})=\refl_{t(\inr(g(x)))},
$$ 
is inhabited. This follows from the fact that we have, for $p:z_1=z_2$ and $q:u(z_1)=t(z_1)$, 
$$
\transport^{z\mapsto(u(z)=t(z))}(p,q)=u(p)^{-1}\cdot q\cdot t(p).
$$ 
(The above formula is easily proved by induction on $p$.)

%%

\subsection{Section 6.9}\label{69}

The induction principle for $\lVert A\rVert$ is stated as follows:

\nn``Given any $B:\lVert A\rVert\to\U$ together with
\begin{itemize}
\item a function $g:\prod_{a:A}B(\lvert a\rvert)$, and
\item for any $x,y:\lVert A\rVert$ and $u:B(x)$ and $v:B(y)$, a dependent path $q:u=^B_{p(x,y)}v$, where $p(x,y)$ is the path coming from the second constructor of $\lVert A\rVert$,
\end{itemize}
there exists 
$$
f:\prod_{x:\lVert A\rVert}B(x)
$$ 
such that $f(\lvert a\rvert)\equiv g(a)$ for $a:A$, and also another computation rule. However, because there can be at most one function between any two mere propositions (up to homotopy), this induction principle is not really useful (see also Exercise 3.17).''

Let us spell out the last sentence above.

We can rewrite the second premise as

\nn($\star$) for any $x,y:\lVert A\rVert$, any $u:B(x)$ and any $v:B(y)$, we are given a dependent path $q(x,y,u,v):u=^B_{p(x,y)}v$, where $p(x,y):x=y$ is the path coming from the second constructor of $\lVert A\rVert$.

We claim this is equivalent to

\nn($\star\star$) for any $x:\lVert A\rVert$ the type $B(x)$ is a mere proposition.

Indeed, assume ($\star$). Letting $x:\lVert A\rVert$ and $u,v:B(x)$, we have $r:\refl_x=p(x,x)$ (because $\lVert A\rVert$ is a mere proposition and thus a set) and 
$$
u=(\refl_x)_\star(u)=p(x,x)_\star(u)=v,
$$ 
the second and third paths being respectively $\ap_{s\mapsto s_\star(u)}(r)$ and $q(x,x,u,v)$. This proves ($\star\star$). The converse is clear. $\square$

We have in particular the following induction principle:

Given any $P:\lVert A\rVert\to\Prop$ together with a function $f:\prod_{a:A}P(\lvert a\rvert)$, there exists $g:\prod_{x:\lVert A\rVert}P(x)$ such that $g(\lvert a\rvert)\equiv f(a)$ for $a:A$.

%%

\subsection{Beginning of Section 6.10}\label{610}

To spell out the induction principle for the quotient $A/R$, let $\alpha(a,b):q(a)=q(b)$ be the path given from $q(a)$ to $q(b)$ whenever $R(a,b)$. 

Given $P:A/R\to\Set$ together with $f:\prod_{a:A}P(q(a))$ and 
$$
\beta(a,b):f(a)=^P_{\alpha(a,b)}f(b)
$$ 
for all $a,b$ such that $R(a,b)$, we have a $g:\prod_{x:A/R}P(x)$ such that $g(q(a))\equiv f(a)$ for all $a:A$, and $\apd_g(\alpha(a,b))=\beta(a,b)$ for all $a,b$ such that $R(a,b)$.

It is easy to see that if our type family $P:A/R\to\Set$ is such that $P(q(b))$ is a mere proposition whenever $R(a,b)$, and if we are just given an $f:\prod_{a:A}P(q(a))$, then we get a $g:\prod_{x:A/R}P(x)$ such that $g(q(a))\eq f(a)$ for all $a:A$.

%This yields in particular the following induction principle:

%Assuming $R$ is reflexive, given any $P:A/R\to\Prop$ together with $$f:\prod_{a:A}P(q(a)),$$ we have a $g:\prod_{x:A/R}P(x)$ such that $g(q(a))\equiv f(a)$ for all $a:A$.

%%

\subsection{Proof of Theorem 6.10.6}

Recall the statement: For any equivalence relation $R$ on $A$, the type $A/\!\!/R$ is equivalent to the set-quotient $A/R$.

The proof uses implicitly the fact that $A/\!\!/R$ is a set. This fact follows immediately from Theorems 7.1.8, 7.1.9 and 7.1.11. of the book. The reader can check that the proof of Theorem 7.1.8 doesn't use Theorems 7.1.8, 7.1.9 and 7.1.11.

%%

%\subsection{Lemma 6.10.8}

%It is easy to see that the type $(A/\sim)$ admits the same induction principle as $A/\sim$ (and in particular is a set).

%%

\subsection{Exercise 6.9}

% previous version https://docs.google.com/document/d/1KuFlAOuigg8siZvzZ8Ofe24VzrhBMv6-vxqSafXzssQ/edit

Recall the statement:

Assuming the Law of Excluded Middle, construct a dependent function $f:\prod_{A:\U}A\to A$ such that $f(\mb2):\mb2\to\mb2$ is the nonidentity automorphism.

Recall that the Law of Excluded Middle is defined in (3.4.1) by 
$$
\LEM:\prod_{A:\U}\isProp(A)\to(A+\neg A).
$$ 

I learnt the following argument from Jason Gross; see 

\nn\href{https://groups.google.com/forum/#!topic/hott-cafe/Pp7AgvKr5PI}{https://groups.google.com/forum/\#!topic/hott-cafe/Pp7AgvKr5PI}.

Let $A$ be a type. We must define $f(A):A\to A$. We set 
$$
C:\eq\sum_{f:A\to A}\isequiv(f)\times\neg(f=\id_A).
$$ 
In particular we have the first projection $\pr_1:C\to A\to A$. By Lemma 3.11.4 we also have 
$$
g:\prod_{B:\U}\isProp(\isContr(B)).
$$ 
We define 
$$
h_1:\isContr(C)\to A\to A,\qquad\quad h_0:\neg\isContr(C)\to A\to A
$$ 
by setting $h_0(x):\eq\id_A$ for all $x:\neg\isContr(C)$, and by letting $h_1(x)$ be the first projection of the center of $x$, for all $x:\isContr(C)$. This induces a map 
$$
h:\big(\isContr(C)+\neg\isContr(C)\big)\to A\to A.
$$ 
We finally set 
$$
f(A):\eq h(\LEM_{\isContr(C)}(g(C))).
$$
It is straightforward to check that this definition does the job. $\square$

%%

\section{Chapter 7}

%%

\subsection{Theorem 7.1.8}\label{718}

Here is a corollary to Theorem 7.1.8: the fibers of a map between $n$-types are $n$-types.

%%

\subsection{First proof of Theorem 7.2.2}

We prove 
$$
f(x,x,\rho(x))\cdot p=f(x,y,\transport^{R(x)}(p,\rho(x)))
$$ 
for $p:x=y$ by based path induction.

%%

%\subsection{n-truncated types (Section 7.3)}

%The phrase ``$A$ is $n$-truncated'' means ``$A$ is an $n$-type'' (Definition 7.1.1). The definition of $n$-truncated map is given in Definition 7.6.1: a map is $n$-truncated if all its fibers are $n$-types.

%%

\subsection{Proof of Theorem 7.3.2}

Claim: If $n\ge-1$ and if $A$ is a type, then $A$ is an $n$-type if and only if the type 
$$
\Map_\star((\mbb S^{n+1},\base),(A,a))
$$ 
is contractible for all $a:A$.

\nn Proof: Use Theorem 7.2.9 and the equivalence 
$$
\Map_\star((\mbb S^{n+1},\base),(A,a))\simeq\Omega^{n+1}(A,a)
$$ 
at the end of \S6.5 of the HoTT Book. $\square$

We prove the existence of $u$ and $v$ as follows. We define $t:\mbb S^{n+1}\to P(h(r))$ as in the book, we set $h'(r,r'):\eq u:\eq t(\base)$, we define $c_u:\mbb S^{n+1}\to P(h(r))$ by $c_u(x):\eq u$ for all $x:\mbb S^{n+1}$, and we set
$$
M:\eq\Map_\star((\mbb S^{n+1},\base),(P(h(r)),u)).
$$ 
Since $(t,\refl_u),(c_u,\refl_u):M$ and $M$ is contractible, there is a path $v:t=c_u$.

%%

\subsection{Proof of Theorem 7.3.5}

Theorem 7.3.5 can also be proved by path induction.

%%

\subsection{Proof of Theorem 7.3.12}

The proof uses various times the principle of double induction for $n$-truncation, principle which we spell out here.

Recall the simple induction principle:

To each couple $(P,f)$ with $P:\lVert A\rVert_n\to n\Type$ and $f:\prod_{x:A}P(\lvert x\rvert_n)$ is attach a section $f':\prod_{u:\lVert A\rVert_n}P(u)$ satisfying $f'(\lvert x\rvert_n)\equiv f(x)$ for all $x:A$.

The double induction principle says:

To each couple $(P,f)$ with $$P:\lVert A\rVert_n\to\lVert A\rVert_n\to n\Type$$ and $f:\prod_{x,y:A}P(\lvert x\rvert_n,\lvert y\rvert_n)$ is attach a section $f'':\prod_{u,v:\lVert A\rVert_n}P(u,v)$ satisfying $f''(\lvert x\rvert_n,\lvert y\rvert_n)\equiv f(x,y)$ for all $x,y:A$.

We derive the double induction principle from the simple induction principle as follows. From 
$$
f:\prod_{x:A}\left(\prod_{y:A}P(\lvert x\rvert_n,\lvert y\rvert_n)\right)
$$ 
we get 
$$
f':\prod_{u:\lVert A\rVert_n}\left(\prod_{y:A}P(u,\lvert y\rvert_n)\right)
$$ 
satisfying $f'(\lvert x\rvert_n)(y)\equiv f(x,y)$ for all $x,y:A$. From $f'(u):\prod_{y:A}P(u,\lvert y\rvert_n)$ we get $f'(u)':\prod_{v:\lVert A\rVert_n}P(u,v)$ satisfying $f'(u)'(\lvert y\rvert_n)\equiv f'(u,y)$ for all $u:\lVert A\rVert_n$, $y:A$. As we have 
$$
f'(\lvert x\rvert_n)'(\lvert y\rvert_n)\equiv f'(\lvert x\rvert_n)(y)\equiv f(x,y) 
$$ 
for all $x,y:A$, we can set $f''(u,v):\eq f'(u)'(v)$ for all $u,v:\lVert A\rVert_n$. 

It seems to me that the equality 
$$
\encode(\decode(\lvert p\rvert_n))=\lvert p\rvert_n
$$ 
can be proved by path induction on $p:x=y$.

%%

\subsection{Definition 7.4.7}\label{747}

Definition 7.4.7 contains the judgment 
$$
\lV h\rV_n:\lV i\rV_n\ci\lV f\rV_n\sim\lV j\rV_n\ci\lV g\rV_n.
$$ 
In fact we have $\lV h\rV_n:\lV i\ci f\rV_n\sim\lV j\ci g\rV_n$. Here is a fix. 

Given the commutative diagram
$$
\xymatrix{
A\ar[r]^f\ar[d]&B\ar[r]^g\ar[d]&C\ar[d]\\
\lV A\rV_n\ar[r]_{\lV f\rV_n}&\lV B\rV_n\ar[r]_{\lV g\rV_n}&\lV C\rV_n,}
$$ 
where the vertical maps are the obvious ones, define 
$$
\ph_n^{g,f}:\lV g\rV_n\ci\lV f\rV_n\sim\lV g\ci f\rV_n
$$ 
by the commutative square 
$$
\xymatrix{
\lV g\rV_n\lV f\rV_n\lv a\rv_n\ar@{=}[d]_{\ph_n^{g,f}(\lv a\rv_n)}\ar@{=}[rrr]^{\ap_{\lV g\rV_n}(\na_n^fa)}&&&
\lV g\rV_n\lv fa\rv_n\ar@{=}[d]^{\na_n^g(fa)}\\
\lV gf\rV_n\lv a\rv_n\ar@{=}[rrr]_{\na_n^{gf}(a)}&&&\lv gfa\rv_n.}
$$ 
(We assume $a:A$, and omit most of the parenthesis.)

Going back to Definition 7.4.7, we may define $\lV c\rV_n$ as being $(\lV i\rV_n,\lV j\rV_n,h'_n)$, where $h'_n$ is the homotopy obtained by composing the three homotopies
$$
\lV i\rV_n\ci\lV f\rV_n\overset{\ph_n^{i,f}}{\sim}\lV i\ci f\rV_n\overset{\lV h\rV_n}{\sim}\lV j\ci g\rV_n\overset{(\ph_n^{i,f})^{-1}}{\sim}\lV j\rV_n\ci\lV g\rV_n.
$$

%%

\subsection{Equality (7.4.11)}

The setting can be summarized by the diagram 
$$
\xymatrix{C\ar[r]^g\ar[d]_f&B\ar[d]^j\\ A\ar[r]_i\ar@{=>}[ur]^h&D,}
$$ 
where the double arrow represents a homotopy $h:i\ci f\sim j\ci g$. Equality (7.4.11) reads $\lv-\rv^D_n\ci c=\lV c\rV_n\ci\lv-\rv^{\mc D}_n$, and is equivalent to
$$
\Big(\lv-\rv^D_n\ci i\ ,\ \lv-\rv^D_n\ci j\ ,\ \ap_{\lv-\rv^D_n}\ci h\Big)
=
\Big(\lV i\rV_n\ci\lv-\rv^A_n\ ,\ \lV j\rV_n\ci\lv-\rv^B_n\ ,\ k\Big).
$$
In turn, the above equality is equivalent to the commutativity of the diagram below. [We drop the subscripts $n$, the superscripts $A,B,C,D$, and most of the parenthesis. We assume $z:C$.] 
$$ 
\xymatrix{
\lV i\rV\lv fz\rv\ar@{=}[d]_{\na^i(fz)}&&
\lV i\rV\lV f\rV\lv z\rv\ar@{=}[ll]_{\ap_{\lV i\rV}(\na^fz)^{-1}}\ar@{=}[d]_{\ph^{\lV i\rV,\lV f\rV}(\lv z\rv)}\ar@{=}[rr]^{h'\lv z\rv}&&
\lV j\rV\lV g\rV\lv z\rv\ar@{=}[d]^{\ph^{\lV j\rV,\lV g\rV}(\lv z\rv)}\ar@{=}[rr]^{\ap_{\lV j\rV}(\na^gz)}&&
\lV j\rV\lv gz\rv\ar@{=}[d]^{\na^j(gz)}\\
%
\lv ifz\rv&&\lV if\rV\lv z\rv\ar@{=}[rr]_{\lV h\rV\lv z\rv}\ar@{=}[ll]^{\na^{if}(z)^{-1}}&&\lV jg\rV\lv z\rv\ar@{=}[rr]_{\na^{jg}(z)}&&\lv jgz\rv.}
$$ 
The small squares commute by \S\ref{747} above.

%%

\subsection{Definition 7.5.1}\label{751}

The following observation, which is an immediate consequence of Corollary 7.3.7, can be made right after Definition 7.5.1:

Let $A$ be a type. Then $A$ is contractible if and only if $A$ is an $n$-connected $n$-type.

%%

\subsection{Proof of Lemma 7.5.10}

I'm just adding two parenthesis to the proof: By Corollary 7.5.8, $\vert-\vert_n$ is $n$-connected. Thus, since $f=g\circ\vert-\vert_n$, by Lemma 7.5.6 $f$ is $n$-connected if and only if $g$ is $n$-connected. But since $g$ is a function between $n$-types, its fibers are also $n$-types (see \S\ref{718} p.~\pageref{718} above). Thus, $g$ is $n$-connected if and only if it is an equivalence (see \S\ref{751} above).

%%

\subsection{Proof of Lemma 7.5.11}

The sentence 

\nn``Then $P$ is a family of $(n-1)$-types and we have $P(a_0)$; hence we have $\prod_{(a:A)}P(a)$ since $a_0:\mb1\to A$ is $(n-1)$-connected''

\nn follows from Lemma 7.5.7.

%%

\subsection{Lemma 7.6.5}

In the last display of the statement of Lemma 7.6.5, the identification $\overline{E}(H,a)$ is a path in the fiber $\fib_{h_2}(h_1(g_1(a)))$ of $h_2$ over $h_1(g_1(a))$.

%%%

\section{Chapter 8}

\subsection{Proof of Corollary 8.1.11}

The claim ``since $\bb Z$ is a set, $\Omega^{n-1}(\bb Z)$ is contractible'' follows from Theorems 7.1.7 (cumulativity of $n$-types) and 7.2.7.

%%

\subsection{Proof of Theorem 8.2.1}

The equality $\lVert\lVert A\rVert_{n+1}\rVert_n=\lVert A\rVert_n$ follows from Lemma 7.3.15.

%%

\subsection{Proof of Lemma 8.3.2 and Corollary 8.4.8}

The equality $\lVert\Omega^k(A,a)\rVert_0=\Omega^k(\lVert(A,a)\rVert_k)$ in the proof of Lemma 8.3.2 follows from Corollary 7.3.14. A similar argument is used in the proof of Corollary 8.4.8.

%%%

\section{Chapter 9}

\subsection{Theorem 9.2.5}

In the penultimate paragraph of the proof of Theorem 9.2.5, one can also argue by path induction.

%%

\subsection{Lemma 9.2.8}\label{928}

To prove Lemma 9.3.2 the following generalization of Lemma 9.2.8 is useful:

In the diagram below, $A,B,C,D$ are categories; $F,G:A\to B$ and $H,K:C\to D$ and $L:B\to C$ are functors; $\gamma:F\to G$ and $\delta:H\to K$ are natural transformations:
$$
\xymatrix{
&&\ar[dd]_\delta&\ar[ll]_H&&&&\ar[dd]_\gamma&\ar[ll]_F\\
D&&&&C&B\ar[l]_L&&&&&A.\\
&&&\ar[ll]^K&&&&&\ar[ll]^G}
$$ 
We have, in the above setting, $(\delta LG)(HL\gamma)=(KL\gamma)(\delta LF)$.

\nn Proof: It suffices to check componentwise: at $a:A$ we have
\begin{align*}
((\delta LG)(HL\gamma))_a
&\:\eq(\delta LG)_{a}(HL\gamma)_a\\
&\:\eq\delta_{LGa}\circ HL(\gamma_a)\\
&= KL(\gamma_a)\ci\delta_{LFa}&\text{by naturality of $\delta$}\\
&\:\eq(KL\gamma)_a\ci(\delta LF)_a\\
&\:\eq((KL\gamma)(\delta LF))_a.
\end{align*}

%%

\subsection{Lemma 9.3.2}

See \S\ref{928} above. The following diagrams and equalities may help the reader:
$$
\begin{array}{ccccccccccccccc}
&\id_A&&&&FG'&&&&\id_A&&&&FG\\
&\leftarrow&&G&&\leftarrow&&F&&\leftarrow&&G'&&\leftarrow\\
A&\eta'\downarrow&A&\leftarrow&B&\ep'\downarrow&B&\leftarrow&A&\eta\downarrow&A&\leftarrow&B&\ep\downarrow&B,\\
&\leftarrow&&&&\leftarrow&&&&\leftarrow&&&&\leftarrow\\
&G'F&&&&\id_B&&&&GF&&&&\id_B
\end{array}
$$ 

$$
(\eta\ G'\ \id_B)(\id_A\ G'\ \ep)=(GF\ G'\ \ep)(\eta\ G'\ FG),
$$

$$
\begin{array}{ccccccc}
&FG'&&&&FG\\
&\leftarrow&&\id_B&&\leftarrow\\
B&\ep'\downarrow&B&\leftarrow&B&\ep\downarrow&B,\\
&\leftarrow&&&&\leftarrow\\
&\id_B&&&&\id_B
\end{array}
$$

$$
(\ep'\ \id_B\ \id_B)(FG'\ \id_B\ \ep)=(\id_B\ \id_B\ \ep)(\ep'\ \id_B\ FG).
$$

%%

\subsection{Proof of Lemma 9.4.9}

$\bu$ The following observation, which could be made just before Definition 9.2.3, is used in the proof of Lemma 9.4.9.

In the setting of Definition 9.2.1, let $p:F_0=G_0$; let $a,a':A_0$; and define $P:(A_0\to B_0)\to\U$ by $P(f):\eq(\hom_A(a,a')\to\hom_B(fa,fa'))$. Then we have 
$$
\tr(p,F_{a,a'})(f)=\msf{idtoiso}(p_{a'})\ci F_{a,a'}(f)\ci\msf{idtoiso}(p_a^{-1}).
$$ 
$\bu$ In the penultimate paragraph of the proof of Lemma 9.4.9, the phrase ``the \emph{other} triangle identity, which we have seen in Chapter 4 is equivalent to (9.4.11)'' refers (I think) to Lemma 4.2.2.

%%%

\section{Chapter 10}

\subsection{Before Lemma 10.1.1}

This is about the sentence ``The obvious candidate for the coequalizer of the kernel pair of $f:A\to B$ is the image of f, as defined in \S7.6'' a few paragraphs before Lemma 10.1.1. (It is clear from the context that $A$ and $B$ are sets.) Let us show that this obvious candidate is the good one. By Lemma 4.8.2 of the book it suffices to prove the following statement:

If $B:A\to\Set$ is a set family over a set $A$ and $\sim$ the equivalence relation $\sum_{a:A}B(a)$ defined by 
$$
(a,b)\sim(a',b')\text{ if and only if }a=a',
$$ 
then the resulting quotient satisfies
$$
\left(\sum_{a:A}B(a)\right)\!\!\!\Bigg/\!\!\!\!\sim\quad=\quad\sum_{a:A}\ \lV B(a)\rV.
$$

Proof. Let us define a map 
$$
h:\left(\sum_{a:A}\ \lV B(a)\rV\right)\quad\to\quad\left(\sum_{a:A}B(a)\right)\!\!\!\Bigg/\!\!\!\!\sim.
$$ 

It suffices to define, keeping $a_0:A$ fixed, the object $h(a_0,\beta)$ for all $\beta:\lV B(a_0)\rV$. Define 
$$
f:B(a_0)\to\left(\sum_{a:A}B(a)\right)\!\!\!\Bigg/\!\!\!\!\sim
$$ 
by $f(b):\eq q(a_0,b)$ for all $b:B(a_0)$, and let 
$$
\tilde f:B(a_0)\to\im(f),\quad\pr_1:\im(f)\to\left(\sum_{a:A}B(a)\right)\!\!\!\Bigg/\!\!\!\!\sim
$$ 
be the canonical factorization of $f$. It is easy to check that $\im(f)$ is a mere proposition. As a result, $f$ induces a map $g:\lV B(a_0)\rV\to\im(f)$ satisfying $g(\lv b\rv)\eq f(b)$ for all $b:B(a_0)$, and we can set $h(a_0,\beta):\eq i(g(\beta))$ for all $b:B(a_0)$.

We leave it to the reader to check, using \S\ref{610} above, that $h$ is an equivalence. $\square$

\begin{comment}

This is about the sentence ``The obvious candidate for the coequalizer of the kernel pair of $f:A\to B$ is the image of f, as defined in \S7.6'' a few paragraphs before Lemma 10.1.1. (It's clear from the context that $A$ and $B$ are sets.) Let's show that this obvious candidate is the good one. It suffices to prove the statement

Let $A$ and $B$ be sets, let $f:A\to B$ be a surjection, define the equivalence relation $\sim$ on $A$ by 
$$
a\sim a'\text{ if and only if }f(a)=f(a'),
$$
let $A/\!\!\sim$ be the quotient as defined at the beginning of \S6.10, and let $q:A\to A/\!\!\sim$ be the canonical projection. Then there is a map $g:B\to A/\!\!\sim$ such that $g\ci f=q$:
$$
\xymatrix{
&A\ar[dl]_f\ar[dr]^q\\
B\ar[rr]_g&&A/\!\!\sim.
}
$$ 

Proof. Given $b:B$ we define the sets and maps 
$$
\xymatrix{
\fib_f(b)\ar[rr]^{\pr_1}\ar[d]_{\lv-\rv}\ar[dr]^{q_b}&&A\ar[d]^q\\ 
\lV\fib_f(b)\rV\ar[r]_h&\fib_f(b)/\!\!\sim_b\ar[r]_{\ \ k}&A/\!\!\sim
}
$$ 
as follows: Let $\sim_b$ be the equivalence relation defined on $\fib_f(b)$ by the requirement that $x\sim_b y$ for all $x,y:\fib_f(b)$, and $q_b$ the canonical projection; and note that $q_b$ induces $h$ and that $q\ci\pr_1$ induces $k$. The above diagram having been constructed, we set $g(b):\eq k(h(x))$, with $x:\lV\fib_f(b)\rV$. The equality $g\ci f=q$ is easily checked. $\square$

\end{comment}

%%

\subsection{Proof of Lemma 10.1.13}

To prove the equality $\msf{merid}_\star(\tau(N))=\tau(S)$, one can use the following lemma:

Let $P:A\to B\to\U$ be a type family, define $Q:A\to\U$ by $$Q(a):\eq\prod_{b:B}P(a,b),$$ let $p:a=a'$ be a path in $A$, let $f:Q(a)$, and let $b:B$. Then we have 
$$
\tr^Q(p,f)(b)=\tr^{P(-,b)}(p,f(b)).
$$

%%

\subsection{The induction principle for \textsf{acc} in \S10.3}

%Let me copy the last display before Lemma 10.3.2:\begin{equation}\label{1032}f:\prod_{a:A}\left(\prod_{b:A}(b<a)\to\acc(b)\times P(b)\right)\to P(a).\end{equation}

%Recall the general induction principle for $\acc$:

%If we have $P:\prod_{a:A}\acc(a)\to\U$ and $f$ as in \eqref{1032}, then we get $$g:\prod_{a:A}\acc(a)\to P(a)$$ with $$g(a,\acc_<(a,\pr_1\ci u))\eq f(a,\pr_1\ci u,\la b.\la l.g(b,\pr_1u(b,l)))$$ for all $a:A$ and all $u:\prod_{b:A}(b<a)\to\acc(b)\times P(b)$.

Here is a first particular case of the general induction principle for $\acc$:

If we have a type family $P:A\to\U$ and %\begin{equation}\label{1032}
$$
f:\prod_{a:A}\left(\prod_{b:A}(b<a)\to\acc(b)\times P(b)\right)\to P(a),%\end{equation}
$$ 
then we get 
$$
g:\prod_{a:A}\acc(a)\to P(a)
$$
with
$$
g(a,\acc_<(a,\pr_1\ci u))\eq f(a,\pr_1\ci u,\la b.\la l.g(b,\pr_1 u(b,l)))
$$
for all $a:A$ and all $u:\prod_{b:A}(b<a)\to\acc(b)\times P(b)$. 

Here is a second particular case:

If $<$ is well-founded, if we have a type family $P:A\to\U$, and if we have 
$$
f:\prod_{a:A}\left(\prod_{b:A}(b<a)\to P(b)\right)\to P(a),
$$
then we get $g:\prod_{a:A}P(a)$ with $g(a)\eq f(a,\la b.\la l.g(b))$ for all $a:A$.

%%

\subsection{Lemma 10.3.7}\label{s1037}

In the setting of Definition 10.3.1, assuming that $<$ is well-founded, and taking Lemma 10.3.2 into account, we get:

Given $P:A\to\U$ and
$$%\begin{equation}\label{e1037}
f:\prod_{a:A}\left(A\times\left(\prod_{b:A}(b<a)\to P(b)\right)\right)\to P(a),
$$%\end{equation} 
there is a $g:\prod_{a:A}P(a)$ such that $g(a)=f(a,c,\la b.\la l.g(b))$ for all $a,c:A$.

%%

\subsection{Lemma 10.3.8}

Recall the statement: 

Assuming excluded middle, $<$ is well-founded if and only if every nonempty subset $B:\mc P(A)$ merely has a minimal element. 

Here is a slightly different phrasing of the proof.

Suppose first $<$ is well-founded and $A$ has no minimal element. That is, for any $a:A$ there merely exists a $b:A$ with $b<a$. We claim 
\begin{equation}\label{10312}
\prod_{a:A}\left(\prod_{a':A}(a'<a)\to\mbf0\right)\to\mbf0.
\end{equation}
Let $a:A$ and $s:\prod_{a':A}(a'<a)\to\mbf0$. It suffices to prove $\mbf0$. As observed above, there is a $b:A$ and an $l:b<a$, yielding $s(b,l):\mbf0$. This implies successively \eqref{10312}, $\prod_{a:A}\mbf0$ by well-founded induction, and thus $A=\mbf0$. 

Now suppose that each nonempty subset merely has a minimal element, and assume that an inaccessible $a_0:A$ merely exists. As it suffices to prove $\mbf0$, we can assume that $a_0$ exists purely, and that it is minimal for the property of being inaccessible, which means that we have an $h:\prod_{b:A}(b<a_0)\to\acc(b)$, yielding $\acc_<(a_0,h):\mbf0$, as required. $\square$

%%

\subsection{Lemma 10.3.12}

Recall the statement: Any simulation is injective.

Here is a slightly different phrasing of the proof:

We prove by well-founded induction on $a:A$ that for any $b:A$, if $f(a)=f(b)$ then $a=b$. The inductive hypothesis for $a:A$ says that for any $a'<a$, and any $b:A$, if $f(a')=f(b)$ then $a'=b$.

Suppose $f(a)=f(b)$; we must show $a=b$. By extensionality, it suffices to show that for any $c:A$ we have $(c<a)\Leftrightarrow(c<b)$. If $c<a$, then $f(c)<f(a)$ by Definition 10.3.11(i). Hence $f(c)<f(b)$, so by Definition 10.3.11(ii) there merely exists $c':A$ with $c'<b$ and $f(c)=f(c')$. By the inductive hypothesis for $a$, we have $c=c'$, hence $c<b$. We prove similarly that $c<b$ implies $c<a$.

%%

\subsection{Theorem 10.4.4}

In the proof of Theorem 10.4.4 the notation $\{f(x)\ \vert\ P(x)\}$, introduced after Lemma 10.1.6, is used a lot.

%%%

\section{Chapter 11}

\subsection{The definition of Q in Section 11.1}

The type $\mbb Q$ is defined in \S11.1 as $\mbb Q:\eq(\mbb Z\times\mbb N)/\approx$, where $\approx$ is defined by 
$$
(u,a)\approx(v,b):\eq(u(b+1)=v(a+1)).
$$ 
One may add something like ``We leave it to the reader to check that $\approx$ is an equivalence relation''.

%%

\subsection{Section 11.2.1}

The following observation could be made just before Lemma 11.2.2: 

For $x,y:\mbb R_d$ the inequality $x<y$ implies $x\neq y$. Moreover the map $f:\mbb Q\to\mbb R_d$, $q\mapsto(L_q,U_q)$ satisfies
$$
f(q)<f(r)\iff q<r\quad\text{and}\quad f(q)\le f(r)\iff q\le r.
$$ 

%%

%\subsection{Absolute value of a Dedekind real in Section 11.2}

%It seems to me that the absolute value of a Dedekind real occurs for the first time in Display (11.2.9), and has not been previously defined. Perhaps one can simply set 
%$$
%(\lvert x\rvert<\ep):\eq(-\ep<x)\wedge(x<\ep).
%$$

%%

\subsection{Corollary to Lemma 11.2.2}\label{1122}

If $q,r:\mbb Q$ and $q<r$ and $x:\mbb R_d$, then we merely have $q<x$ or $x<r$ by locatedness.

\subsection{Proof of Theorem 11.2.12}

The claim ``Since $q+2\ep<r-2\ep$ merely $L_{x_\ep}(q+2\ep)$ or $U_{x_\ep}(q-2\ep)$'' follows from \S\ref{1122} above.

%%

\section{Appendix A}

It seems to me that the expression $\la x.b$ is defined in two conflicting ways, firstly at the beginning of A.1, and secondly in the last sentence of A.2.4. 

\end{document}
